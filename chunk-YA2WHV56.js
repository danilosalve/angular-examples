import{a as N}from"./chunk-4EOMFFPW.js";import{Ga as G,Ia as $,W as m,X as H,ia as Q,ka as U,ua as W}from"./chunk-RMWKUWRA.js";import"./chunk-X3GKO6FF.js";import{$b as E,Ac as j,Bb as I,Cb as w,Cc as D,Da as C,Ea as y,Ec as k,Ha as c,Jc as A,Kc as f,Lc as g,Nb as V,Nc as v,Ob as F,Ub as a,ca as x,ec as r,fc as l,gc as R,hb as S,ia as u,jb as i,kc as q,ld as B,pc as d,qc as p,sa as P,sb as T,ta as _,xb as h,zc as z}from"./chunk-WCLJ7DBJ.js";import{e as M}from"./chunk-JKOY2XUY.js";var b=(()=>{class o{constructor(){this.apiUrl="https://rickandmortyapi.com/api/character",this.page=c(1),this.persons=[],this.getPersons=B({request:this.page,loader:s=>M(this,[s],function*({request:e,abortSignal:t}){try{let n=yield(yield fetch(`${this.apiUrl}/?page=${e}`,{signal:t})).json();return this.persons.length>0?this.persons=this.persons.concat(n.results):this.persons=n.results,n=this.persons,n}catch(n){this.handleError(n)}})})}getColumns(){return[{property:"id",label:"Id",sortable:!0,type:"number"},{property:"name",label:"Nome",sortable:!0,type:"string"},{property:"status",label:"Status",sortable:!0,type:"label",visible:this.IsColumnVisible(),labels:[{value:"Alive",color:"color-10",label:"Vivo"},{value:"Dead",color:"color-02",label:"Morto"},{value:"unknown",color:"color-07",label:"Desconhecido"}]},{property:"species",label:"Esp\xE9cie",sortable:!0,type:"string",visible:this.IsColumnVisible()},{property:"gender",label:"G\xEAnero",sortable:!0,type:"label",visible:this.IsColumnVisible(),labels:[{value:"Female",color:"color-06",label:"Feminino"},{value:"Male",color:"color-02",label:"Masculino"},{value:"Genderless",color:"color-08",label:"Sem g\xEAnero"},{value:"unknown",color:"color-07",label:"Desconhecido"}]},{property:"location.name",label:"Localiza\xE7\xE3o",sortable:!0,type:"string",visible:this.IsColumnVisible()},{property:"type",label:"Tipo",sortable:!0,type:"string",visible:!1}]}updatePage(e){this.page.set(e)}handleError(e){throw e}IsColumnVisible(){return window.innerWidth>480}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=x({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Y=()=>["name"],J=(()=>{class o extends N{constructor(){let e=[".po-page-header",".po-row po-table-footer-show-more ng-star-inserted"];super(400,e),this.persons=y.required(),this.isLoading=y(!1),this.viewDetailPerson=C(),this.loadMorePersons=C(),this.personsService=u(b),this.columns=this.personsService.getColumns(),this.filterType=Q.contains,this.actions=[{label:"Compartilhar",action:this.viewDetail.bind(this),icon:"an an-share",disabled:!0},{label:"Detalhes",action:this.viewDetail.bind(this),icon:"an an-arrow-square-in"}]}ngAfterViewInit(){this.onResize()}loadPersons(){this.loadMorePersons.emit()}viewDetail(e){this.viewDetailPerson.emit(e)}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=h({type:o,selectors:[["app-persons-list"]],hostBindings:function(t,s){t&1&&d("resize",function(){return s.onResize()},!1,S)},inputs:{persons:[1,"persons"],isLoading:[1,"isLoading"]},outputs:{viewDetailPerson:"viewDetailPerson",loadMorePersons:"loadMorePersons"},features:[I],decls:1,vars:11,consts:[["p-container","shadow",3,"p-show-more","p-items","p-loading","p-height","p-columns","p-draggable","p-sort","p-filtered-columns","p-hide-table-search","p-filter-type","p-actions"]],template:function(t,s){t&1&&(r(0,"po-table",0),d("p-show-more",function(){return s.loadPersons()}),l()),t&2&&a("p-items",s.persons())("p-loading",s.isLoading())("p-height",s.height)("p-columns",s.columns)("p-draggable",!0)("p-sort",!0)("p-filtered-columns",v(10,Y))("p-hide-table-search",!1)("p-filter-type",s.filterType)("p-actions",s.actions)},dependencies:[W,U],encapsulation:2,changeDetection:0})}}return o})();var Z=()=>[import("./chunk-PJ67SQCW.js").then(o=>o.PersonDetailComponent)],ee=()=>[];function oe(o,L){if(o&1&&(r(0,"p"),D(1,"Ops, ocorreu erro ao tentar listar os Usu\xE1rios :("),l(),D(2)),o&2){p();let e=g(3);i(2),k(" ",e," ")}}function te(o,L){if(o&1){let e=q();r(0,"app-persons-list",3),d("loadMorePersons",function(){P(e);let s=p();return _(s.loadPersons())})("viewDetailPerson",function(s){P(e);let n=p();return _(n.viewDetail(s))}),l()}if(o&2){p();let e=g(1),t=g(2);a("persons",e)("isLoading",t)}}function se(o,L){if(o&1&&R(0,"app-person-detail",4),o&2){let e=p();a("person",e.person())}}var _e=(()=>{class o{constructor(){this.modal=T.required(m),this.page=c(1),this.personsService=u(b),this.personsResource=this.personsService.getPersons,this.person=c(void 0)}loadPersons(){this.page.update(e=>e+1),this.personsService.updatePage(this.page())}restartPersons(){this.personsResource.reload()}viewDetail(e){this.person.set(e),this.modal().open()}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=h({type:o,selectors:[["app-persons"]],viewQuery:function(t,s){t&1&&z(s.modal,m,5),t&2&&j()},decls:10,vars:7,consts:[["p-title","Rick & Morty | Personagens","p-subtitle","Exemplo de uso da API resource"],[3,"persons","isLoading"],["p-size","lg",3,"p-title"],[3,"loadMorePersons","viewDetailPerson","persons","isLoading"],[3,"person"]],template:function(t,s){if(t&1&&(r(0,"po-page-default",0),A(1)(2)(3),w(4,oe,3,1)(5,te,1,2,"app-persons-list",1),r(6,"po-modal",2),w(7,se,1,1),V(8,7,Z),l()()),t&2){let n;i(),f(s.personsResource.value()||v(6,ee)),i(),f(s.personsResource.isLoading()),i();let K=f(s.personsResource.error());i(),E(K?4:5),i(2),a("p-title",((n=s.person())==null?null:n.name)||"Detalhes"),i(2),F(!s.modal().isHidden)}},dependencies:[$,G,H,m,J],encapsulation:2})}}return o})();export{_e as PersonsComponent};
