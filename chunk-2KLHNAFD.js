import{a as Pe}from"./chunk-VGXTUAFD.js";import{b as ye}from"./chunk-MMM42JO3.js";import{$ as pe,Aa as le,Ca as de,D as ee,Da as me,Ea as ue,F as te,Fa as ge,La as he,N as ie,Na as fe,P as oe,R as ne,Ra as ve,S as re,Sa as Ce,_ as ae,oa as se,wa as _,x as Z,ya as ce}from"./chunk-V5TXKAIM.js";import{r as X}from"./chunk-ILNAH6AD.js";import{$b as a,Bc as W,Cc as c,Dc as K,Dd as Y,Ea as q,Ec as L,Jc as I,Kc as U,Lc as z,Qc as G,Ub as C,V as k,Vb as y,Vc as D,Xb as j,Xc as E,Yb as S,Zb as b,_b as p,ac as s,bc as h,cc as A,da as Q,db as r,dc as B,dd as J,ec as H,ia as u,ic as O,kd as f,ld as R,nc as V,oa as F,oc as P,pa as N,vb as g,vc as M,wc as w,xa as l,yb as $}from"./chunk-5QGOOW3X.js";import"./chunk-RTRJ3KFH.js";function we(t,e){if(t&1&&H(0,"i"),t&2){let d=e.$index,o=P();W(o.getStarClass(d+1))}}function Le(t,e){if(t&1&&(A(0,"p",1),c(1),B()),t&2){let d=P();r(),L("Avalia\xE7\xF5es: (",d.count(),")")}}var _e=(()=>{let e=class e{constructor(){this.rating=f.required(),this.max=f.required(),this.count=f(0),this.stars=[]}ngOnInit(){for(let o=0;o<this.max();o++)this.stars.push(o)}getStarClass(o){return o<=this.rating()?"an-fill an-star":o-1+.5<this.rating()?"an-fill an-star-half":"an an-star"}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["app-rating"]],inputs:{rating:[1,"rating"],max:[1,"max"],count:[1,"count"]},decls:3,vars:1,consts:[[3,"class"],[1,"po-font-text-smaller"]],template:function(n,i){n&1&&(S(0,we,1,2,"i",0,j),C(2,Le,2,1,"p",1)),n&2&&(b(i.stars),r(2),y(i.count()?2:-1))},encapsulation:2});let t=e;return t})();var De=["poImage"],xe=(()=>{let e=class e{constructor(){this.poImageRef=R.required("poImage",{read:q}),this.product=f.required(),this.height=l(280),this.image=l(40),this.imageHeight=J(()=>this.height()-this.image()),this.device=u(Pe)}ngOnInit(){this.device.isSmartPhone()&&(this.height.set(610),this.image.set(300))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["app-product-card"]],viewQuery:function(n,i){n&1&&M(i.poImageRef,De,5,q),n&2&&w()},inputs:{product:[1,"product"]},decls:15,vars:16,consts:[["poImage",""],[1,"po-sm-12","po-md-12","po-lg-6","po-xl-4","po-mb-2",3,"p-height"],[1,"po-row"],[1,"po-md-5","po-lg-5"],["p-loading","lazy",3,"p-src","p-alt","p-height"],["p-trigger","click","p-title","Descri\xE7\xE3o","p-position","bottom",3,"p-target","p-hide-arrow"],[1,"po-md-7","po-lg-7"],[1,"po-font-text-large-bold","po-mb-1"],[1,"po-mb-1",3,"p-value"],["p-label","Pre\xE7o",3,"p-value"],[3,"rating","max","count"]],template:function(n,i){if(n&1&&(a(0,"po-widget",1),I(1),D(2,"currency"),a(3,"div",2)(4,"div",3),h(5,"po-image",4,0),a(7,"po-popover",5),c(8),s()(),a(9,"div",6)(10,"p",7),c(11),s(),h(12,"po-tag",8)(13,"po-info",9)(14,"app-rating",10),s()()()),n&2){p("p-height",i.height());let m=E(2,13,i.product().price,"BRL")??0;r(5),p("p-src",i.product().image)("p-alt",i.product().description)("p-height",i.imageHeight()),r(2),p("p-target",i.poImageRef())("p-hide-arrow",!0),r(),L(" ",i.product().description," "),r(3),K(i.product().title),r(),p("p-value",i.product().category),r(),p("p-value",m.toString()),r(),p("rating",i.product().rating.rate)("max",5)("count",i.product().rating.count)}},dependencies:[Ce,ve,me,de,te,ee,_e,ge,ue,re,ne,X],encapsulation:2,changeDetection:0});let t=e;return t})();var Se=(()=>{let e=class e{constructor(){this.apiUrl="https://fakestoreapi.com/products",this.limit=l(10),this.http=u(Y),this.getProducts=ye({params:()=>({limit:this.limit()}),stream:({params:o})=>this.http.get(`${this.apiUrl}?limit=${o.limit}`).pipe(k(1))})}updateLimit(o){this.limit.set(o)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var be=(()=>{let e=class e{transform(o,n){return n?o.filter(i=>i.title.toLocaleLowerCase().startsWith(n.toLocaleLowerCase())||i.category.toLocaleLowerCase().startsWith(n.toLocaleLowerCase())):o}};e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=$({name:"productsSearch",type:e,pure:!0});let t=e;return t})();var Ee=()=>[],Re=(t,e)=>e.id;function Te(t,e){if(t&1&&h(0,"app-product-card",7),t&2){let d=e.$implicit;p("product",d)}}function Fe(t,e){t&1&&(a(0,"p"),c(1,"Nenhum produto encontrado."),s())}function Ne(t,e){if(t&1&&S(0,Te,1,1,"app-product-card",7,Re,!1,Fe,2,0,"p"),t&2){P();let d=z(1);b(d)}}function qe(t,e){t&1&&(a(0,"p"),c(1,"Nenhum produto encontrado."),s())}function Ve(t,e){t&1&&(a(0,"p",5),c(1,"Ops, ocorreu erro ao tentar listar os Produtos :("),s())}var st=(()=>{let e=class e{constructor(){this.filter=l(""),this.filterKeys=["title","category"],this.limit=l(10),this.poSelect=R.required(_),this.productsService=u(Se),this.productsResource=this.productsService.getProducts,this.optionsLimit=[{label:"10",value:10},{label:"15",value:15},{label:"30",value:30}]}ngAfterContentInit(){this.poSelect().modelValue=this.limit()}onChangeLimit(o){this.limit.set(o),this.productsService.updateLimit(this.limit())}onChangeFilter(o){this.filter.set(o.value)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["app-products"]],viewQuery:function(n,i){n&1&&M(i.poSelect,_,5),n&2&&w()},decls:11,vars:13,consts:[["p-title","Produtos","p-subtitle","Exemplo de uso da API RxResource"],[1,"po-row"],["p-label","Itens por p\xE1gina","name","limit",1,"po-sm-12","po-md-4","po-lg-2","po-xl-2",3,"p-change","p-options"],["p-aria-label","Campos para pesquisa de Produtos",1,"po-sm-12","po-md-8","po-lg-4","po-xl-3","po-mt-md-4","po-mt-lg-4","po-mt-xl-4",3,"p-filter","p-items","p-disabled","p-filter-keys","p-show-listbox"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mb-5"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mb-2"],["p-text","Carregando produtos",3,"hidden"],[3,"product"]],template:function(n,i){if(n&1){let m=O();a(0,"po-page-default",0),I(1),D(2,"productsSearch"),a(3,"div",1)(4,"po-select",2),V("p-change",function(v){return F(m),N(i.onChangeLimit(v))}),s(),a(5,"po-search",3),V("p-filter",function(v){return F(m),N(i.onChangeFilter(v))}),s(),a(6,"po-container",4),C(7,Ne,3,1)(8,qe,2,0,"p"),C(9,Ve,2,0,"p",5),h(10,"po-loading-overlay",6),s()()()}if(n&2){r();let m=U(E(2,8,i.productsResource.value()||G(12,Ee),i.filter())),x=i.productsResource.hasValue(),v=i.productsResource.isLoading(),Me=i.productsResource.error();r(3),p("p-options",i.optionsLimit),r(),p("p-items",m)("p-disabled",!x)("p-filter-keys",i.filterKeys)("p-show-listbox",!0),r(2),y(x?7:8),r(2),y(Me?9:-1),r(),p("hidden",!v)}},dependencies:[fe,he,oe,ie,pe,ae,le,_,ce,se,xe,Z,be],encapsulation:2});let t=e;return t})();export{st as ProductsComponent};
