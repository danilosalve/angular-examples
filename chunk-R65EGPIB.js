import{b as I}from"./chunk-TDWIGFC6.js";import{$ as p,$a as Q,Aa as z,Ac as it,Bb as U,Bc as nt,D as l,F as u,Gb as B,I as n,Ib as W,Mb as H,N as E,Nb as N,O as m,Ob as G,Pb as J,Sb as K,T as C,Tb as X,aa as L,ba as f,da as q,ea as P,fa as _,ga as r,ha as a,ia as c,ic as h,ka as D,la as F,ma as g,mc as Y,n as S,oc as Z,pa as $,pc as tt,q as R,qa as V,ra as d,sa as A,sc as et,ta as j,u as v,uc as ot,x as T,y as w,ya as k,za as O}from"./chunk-2ZMTMRUR.js";import"./chunk-4CLCTAJ7.js";function st(t,s){if(t&1&&c(0,"i"),t&2){let e=s.$index,o=g();L(o.getStarClass(e+1))}}function ct(t,s){if(t&1&&(r(0,"p",1),d(1),a()),t&2){let e=g();n(),j("Avalia\xE7\xF5es: (",e.count(),")")}}var rt=(()=>{class t{constructor(){this.rating=l.required(),this.max=l.required(),this.count=l(0),this.stars=[]}ngOnInit(){for(let e=0;e<this.max();e++)this.stars.push(e)}getStarClass(e){return e<=this.rating()?"an-fill an-star":e-1+.5<this.rating()?"an-fill an-star-half":"an an-star"}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=m({type:t,selectors:[["app-rating"]],inputs:{rating:[1,"rating"],max:[1,"max"],count:[1,"count"]},decls:3,vars:1,consts:[[3,"class"],[1,"po-font-text-smaller"]],template:function(o,i){o&1&&(P(0,st,1,2,"i",0,q),C(2,ct,2,1,"p",1)),o&2&&(_(i.stars),n(2),f(i.count()?2:-1))},encapsulation:2})}}return t})();var at=(()=>{class t{constructor(){this.product=l.required()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=m({type:t,selectors:[["app-product-card"]],inputs:{product:[1,"product"]},decls:12,vars:9,consts:[[1,"po-sm-12","po-md-12","po-lg-6","po-xl-4","po-mb-2",3,"p-height"],[1,"po-row"],[1,"po-md-5","po-lg-5","po-hidden-sm"],["p-size","xl","p-loading","lazy",3,"p-src"],[1,"po-md-7","po-lg-7"],[1,"po-font-text-large-bold","po-mb-1"],[1,"po-mb-1",3,"p-value"],["p-label","Pre\xE7o",3,"p-value"],[3,"rating","max","count"],[1,"po-visible-sm"],["p-size","xl","p-loading","eager",3,"p-src"]],template:function(o,i){o&1&&(r(0,"po-widget",0)(1,"div",1)(2,"div",2),c(3,"po-avatar",3),a(),r(4,"div",4)(5,"p",5),d(6),a(),c(7,"po-tag",6)(8,"po-info",7)(9,"app-rating",8),a(),r(10,"div",9),c(11,"po-avatar",10),a()()()),o&2&&(p("p-height",250),n(3),p("p-src",i.product().image),n(3),A(i.product().title),n(),p("p-value",i.product().category),n(),p("p-value",i.product().price.toString()),n(),p("rating",i.product().rating.rate)("max",5)("count",i.product().rating.count),n(2),p("p-src",i.product().image))},dependencies:[nt,it,tt,Z,W,B,N,H,rt],encapsulation:2,changeDetection:0})}}return t})();var pt=(()=>{class t{constructor(){this.apiUrl="https://fakestoreapi.com/products",this.productId=u(0),this.limit=u(10),this.http=v(Q),this.getProducts=I({request:this.limit,loader:({request:e})=>this.http.get(`${this.apiUrl}?limit=${e}`).pipe(S(1))}),this.getProductById=I({request:this.productId,loader:({request:e})=>this.http.get(`${this.apiUrl}/${e}`).pipe(S(1))})}updateProduct(e){this.productId.set(e)}updateLimit(e){this.limit.set(e)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var lt=(t,s)=>s.id;function mt(t,s){if(t&1&&c(0,"app-product-card",6),t&2){let e=s.$implicit;p("product",e)}}function ut(t,s){if(t&1&&P(0,mt,1,1,"app-product-card",6,lt),t&2){g();let e=z(1);_(e)}}function ft(t,s){t&1&&(r(0,"p"),d(1,"Nenhum produto encontrado."),a())}function gt(t,s){t&1&&(r(0,"p",4),d(1,"Ops, ocorreu erro ao tentar listar os Produtos :("),a())}var At=(()=>{class t{constructor(){this.limit=u(10),this.poSelect=E.required(h),this.productsService=v(pt),this.productsResource=this.productsService.getProducts,this.optionsLimit=[{label:"10",value:10},{label:"15",value:15},{label:"30",value:30}]}ngOnInit(){this.poSelect().modelValue=this.limit()}onChangeLimit(e){this.limit.set(e),this.productsService.updateLimit(this.limit())}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=m({type:t,selectors:[["app-products"]],viewQuery:function(o,i){o&1&&$(i.poSelect,h,5),o&2&&V()},decls:12,vars:5,consts:[["p-title","Produtos","p-subtitle","Exemplo de uso da API RxResource"],[1,"po-row"],["p-label","Itens por p\xE1gina","name","limit",3,"p-change","p-options"],[1,"po-mb-5"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mb-2"],["p-text","Carregando produtos",3,"hidden"],[3,"product"]],template:function(o,i){if(o&1){let y=D();r(0,"po-page-default",0),k(1)(2)(3)(4),r(5,"div",1)(6,"po-select",2),F("p-change",function(x){return T(y),w(i.onChangeLimit(x))}),a(),r(7,"po-container",3),C(8,ut,2,0)(9,ft,2,0,"p")(10,gt,2,0,"p",4),c(11,"po-loading-overlay",5),a()()()}if(o&2){n(),O(i.productsResource.value());let y=i.productsResource.hasValue(),b=i.productsResource.isLoading(),x=i.productsResource.error();n(5),p("p-options",i.optionsLimit),n(2),f(y?8:9),n(2),f(x?10:-1),n(),p("hidden",!b)}},dependencies:[ot,et,J,G,X,K,Y,h,at,U],encapsulation:2})}}return t})();export{At as ProductsComponent};
