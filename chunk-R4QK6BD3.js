import{E as m,h,t as u}from"./chunk-767J7M2A.js";var a=class{constructor(e,t){this._id=this.uuid(),this._key=e,this._data=t,this._timestamp=new Date().getTime()}get id(){return this._id}get key(){return this._key}get data(){return this._data}get timestamp(){return this._timestamp}uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}},p=class{constructor(){this.separator=":",this.eventBus=new h}keyMatch(e,t){let s="*",l="**",f=(r,n)=>r===s||r===n,i=this.separator,x=e.split(i),o=t.split(i),g=x.length,w=o.length,y=Math.max(g,w);for(let r=0;r<y;r++){let n=x[r],c=o[r];if(c===l&&typeof n<"u")return!0;if(!f(c,n))return!1}return!0}cast(e,t){if(!e.trim().length)throw new Error("key parameter must be a string and must not be empty");let s=new a(e,t);this.eventBus.next({key:e,metadata:s})}on(e){return this.eventBus.asObservable().pipe(m(t=>this.keyMatch(t.key,e)),u(t=>t.metadata))}};export{p as a};
