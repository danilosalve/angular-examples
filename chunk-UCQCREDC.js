import{a as d,b as Se,c as be,d as xe,e as we,f as _e,g as Me}from"./chunk-PQEMPFFF.js";import{a as ve}from"./chunk-GT2TSNNX.js";import{$ as le,Aa as me,Ca as ue,Da as de,Ga as ge,Ha as fe,Ia as he,Ma as ye,N as ae,Na as Ce,P as se,_ as pe,k as ne,p as ie,ta as ce,x as re}from"./chunk-V5TXKAIM.js";import{t as te}from"./chunk-ILNAH6AD.js";import{$b as m,Ab as V,Cc as Q,Dd as oe,Ec as N,G as F,Gc as O,Hc as Y,Ic as G,J as k,O as z,P as C,Pc as J,Ub as j,Vb as L,X as x,_ as f,_b as c,ac as u,b as D,bb as A,bc as I,cd as K,d as E,da as U,db as l,dd as X,ed as Z,h as T,ia as p,jd as $,md as ee,n as H,nc as g,oc as W,r as B,ra as w,t as y,ta as _,vb as v,wa as M,zb as R}from"./chunk-5QGOOW3X.js";import"./chunk-RTRJ3KFH.js";var Le=(()=>{let t=class t{constructor(){this.query=ee(""),this.queryChange=$()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=v({type:t,selectors:[["app-search-box"]],inputs:{query:[1,"query"]},outputs:{query:"queryChange",queryChange:"queryChange"},decls:1,vars:2,consts:[["p-icon","an an-magnifying-glass","p-placeholder","Pesquisar mutantes...","p-clean","","name","query","p-help","Efetue a busca utilizando Apelido, E-mail ou Nome",3,"ngModelChange","p-no-autocomplete","ngModel"]],template:function(o,i){o&1&&(m(0,"po-input",0),G("ngModelChange",function(s){return Y(i.query,s)||(i.query=s),s}),g("ngModelChange",function(s){return i.queryChange.emit(s)}),u()),o&2&&(c("p-no-autocomplete",!0),O("ngModel",i.query))},dependencies:[re,ne,ie,me,ce],encapsulation:2,changeDetection:0});let e=t;return e})();var Ie=(()=>{let t=class t{constructor(){this.http=p(oe)}getUsers(n=""){return this.http.get("assets/json/user.db.json").pipe(y(o=>o.users),y(o=>n?o.filter(i=>i.name.toLocaleLowerCase().includes(n.toLocaleLowerCase())||i.nickname.toLocaleLowerCase().includes(n.toLocaleLowerCase())||i.email.toLocaleLowerCase().includes(n.toLocaleLowerCase())):o))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function q(e,t){let r=t?.injector??p(w),n=new T,o=e(n).subscribe();r.get(_).onDestroy(()=>o.unsubscribe());let i=(a,s)=>{if(Te(a))return n.next(a),{destroy:D};let Pe=He(),S=s?.injector??Pe??r;if(M(a)){let h=Z(()=>{let De=a();K(()=>n.next(De))},{injector:S});return o.add({unsubscribe:()=>h.destroy()}),h}let b=a.subscribe(h=>n.next(h));return o.add(b),S!==r&&S.get(_).onDestroy(()=>b.unsubscribe()),{destroy:()=>b.unsubscribe()}};return i.destroy=o.unsubscribe.bind(o),i}function Te(e){return!M(e)&&!B(e)}function He(){try{return p(w)}catch{return}}function qe(e,t,r){let n=typeof e=="function"?{next:e,error:t,complete:r}:e;return o=>o.pipe(f({next:n.next,complete:n.complete}),F(i=>(n.error(i),H)),n.finalize?C(n.finalize):i=>i)}var Be={users:[],isLoading:!1,query:"",error:null},P=Se(Me(Be),be(()=>({userService:p(Ie)})),xe(({users:e})=>({userCount:X(()=>e().length)})),_e(e=>({updateQuery(t){d(e,{query:t})},loadUsers:q(t=>t.pipe(x(()=>e.userService.getUsers().pipe(f({next:r=>d(e,{users:r,isLoading:!1,error:null}),error:()=>d(e,{error:"Falha ao carregar usu\xE1rios",isLoading:!1})}))))),loadByQuery:q(E(k(300),z(),f(()=>d(e,{isLoading:!0})),x(t=>e.userService.getUsers(t).pipe(qe({next:r=>d(e,{users:r}),error:()=>d(e,{isLoading:!1,error:"Falha ao carregar usu\xE1rios"})}),C(()=>d(e,{isLoading:!1}))))))})),we({onInit({loadByQuery:e,query:t}){e(t)}}));function Fe(e,t){e&1&&I(0,"po-loading-overlay")}function ke(e,t){if(e&1&&(m(0,"div",1),I(1,"po-info",9)(2,"po-info",10)(3,"po-info",11),u()),e&2){let r=t.$implicit;l(),c("p-value",r.nickname),l(),c("p-value",r.email),l(),c("p-value",r.description)}}function ze(e,t){if(e&1&&(m(0,"div",1)(1,"po-list-view",7),V(2,ke,4,3,"ng-template",8),u()()),e&2){let r=W();l(),c("p-height",r.height)("p-items",r.store.users())}}var bt=(()=>{let t=class t extends ve{constructor(){super("signals/samples"),this.store=p(P),this.height=300}ngAfterViewInit(){this.onResize()}ngOnInit(){this.store.loadUsers()}onResize(){setTimeout(()=>this.setHeight(),200)}setHeight(){let n=[];n.push(this.getElementHeightById(".po-page-header")),n.push(this.getElementHeightById(".search")),this.height=this.calculateHeight(n)-150}getElementHeightById(n){let o=document.querySelector(n);return o?o.clientHeight:0}calculateHeight(n){return n.reduce((o,i)=>o-i,window.innerHeight)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=v({type:t,selectors:[["app-signals-store"]],hostBindings:function(o,i){o&1&&g("resize",function(){return i.onResize()},A)},features:[J([P]),R],decls:10,vars:4,consts:[["p-title","Store","p-subtitle","Exemplo de uso do SignalsStore",3,"p-back"],[1,"po-row"],[1,"po-mb-5","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"po-row","search"],[1,"po-xl-3","po-lg-4","po-md-8","po-sm-12","po-mb-1",3,"queryChange","query"],[1,"po-xl-12","po-lg-12","po-md-12","po-sm-12","po-mb-2"],[1,"po-font-text-small"],["p-property-title","name",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12",3,"p-height","p-items"],["p-list-view-content-template",""],["p-label","Apelido",1,"po-sm-12","po-md-6","po-lg-3","po-xl-3",3,"p-value"],["p-label","Email",1,"po-sm-12","po-md-6","po-lg-9","po-xl-9",3,"p-value"],["p-label","Descri\xE7\xE3o",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12",3,"p-value"]],template:function(o,i){o&1&&(m(0,"po-page-detail",0),g("p-back",function(){return i.onBack()}),m(1,"div",1)(2,"po-container",2)(3,"div",3)(4,"app-search-box",4),g("queryChange",function(s){return i.store.updateQuery(s)}),u(),m(5,"div",5)(6,"p",6),Q(7),u()()(),j(8,Fe,1,0,"po-loading-overlay"),j(9,ze,3,2,"div",1),u()()()),o&2&&(l(4),c("query",i.store.query()),l(3),N("Mutantes: ",i.store.userCount()),l(),L(i.store.isLoading()?8:-1),l(),L(i.store.isLoading()?-1:9))},dependencies:[te,Le,Ce,ye,se,ae,he,fe,ge,de,ue,le,pe],encapsulation:2});let e=t;return e})();export{bt as SignalsStoreComponent};
