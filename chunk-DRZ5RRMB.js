import{a as G}from"./chunk-PMAZFM5Y.js";import{a as q}from"./chunk-MJJCZ32K.js";import{$ as D,Ca as W,Na as $,O as F,Q as O,Qa as j,_ as w,k as P,l as T,n as B,oa as k,p as E,q as I,x,za as A}from"./chunk-HCPK7XEO.js";import{o as b}from"./chunk-MDUUVM26.js";import{$b as n,Cc as c,Fc as N,Gc as S,Hc as v,Ic as C,Vc as _,Xc as M,Yb as u,Zb as d,a as g,ac as s,db as m,ia as r,md as y,nc as h,vb as f}from"./chunk-QL522RBE.js";import"./chunk-RTRJ3KFH.js";var K=(t,e)=>e.message;function L(t,e){if(t&1&&(n(0,"div",6),c(1),_(2,"date"),s()),t&2){let l=e.$implicit;m(),N("",l.message," (",M(2,2,l.timestamp,"shortTime"),")")}}function R(t,e){t&1&&(n(0,"p"),c(1,"Nenhuma mensagem encontrada."),s())}var J="NOTIFICATIONS",ne=(()=>{let e=class e{constructor(){this.message=y(""),this.eventBus$=new g,this.notifications=[],this.notificationService=r(G),this.poNotification=r(k),this.eventBus=r(q)}sendMessage(){if(!this.message()){this.poNotification.error("Mensagem n\xE3o pode ser vazia");return}this.notificationService.sendNotification(this.message()),this.message.update(()=>"")}ngOnInit(){this.getNotificationsBySessionStorage(),this.eventBus$=this.eventBus.on("notification").subscribe(i=>{this.notifications.push(i.data),sessionStorage.setItem(J,JSON.stringify(this.notifications))})}ngOnDestroy(){this.eventBus$.unsubscribe()}getNotificationsBySessionStorage(){let i=sessionStorage.getItem(J)||"";try{if(i){let o=JSON.parse(i);this.notifications=o}}catch{return}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=f({type:e,selectors:[["app-notifications"]],inputs:{message:[1,"message"]},outputs:{message:"messageChange"},decls:10,vars:2,consts:[["p-title","Notifica\xE7\xF5es","p-subtitle","Exemplo de uso do ng-event-bus"],[1,"po-row"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mb-2"],["p-label","Mensagem","name","message","p-help","Insira a mensagem que deseja notificar o usuario","p-placeholder","Insira a sua mensagem aqui...",3,"ngModelChange","ngModel"],["p-label","Enviar","p-kind","primary",3,"p-click"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"po-font-text"]],template:function(o,a){o&1&&(n(0,"po-page-default",0)(1,"div",1)(2,"po-container",2)(3,"form")(4,"po-textarea",3),C("ngModelChange",function(p){return v(a.message,p)||(a.message=p),p}),s(),n(5,"po-button",4),h("p-click",function(){return a.sendMessage()}),s()()(),n(6,"po-container",5),u(7,L,3,5,"div",6,K,!1,R,2,0,"p"),s()()()),o&2&&(m(4),S("ngModel",a.message),m(3),d(a.notifications))},dependencies:[j,$,W,A,O,F,x,I,P,T,E,B,D,w,b],encapsulation:2});let t=e;return t})();export{ne as NotificationsComponent};
