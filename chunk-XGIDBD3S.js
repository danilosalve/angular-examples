import{a as N}from"./chunk-4EOMFFPW.js";import{Fa as G,Ha as $,V as u,W as H,ha as Q,ja as U,ta as W}from"./chunk-WPXD2HJP.js";import"./chunk-GXM4UOOP.js";import"./chunk-A76WCV23.js";import{Bb as w,Da as C,Ea as y,Ec as A,Fc as f,Gc as g,Ia as c,Ic as v,Mb as V,Nb as F,Tb as a,Zb as E,ca as x,cc as r,dc as l,dd as B,ec as R,fb as S,hb as n,ia as m,ic as q,kc as d,lc as p,qb as T,sa as P,ta as _,uc as z,vb as h,vc as j,xc as D,zb as I,zc as k}from"./chunk-VHTPDAAZ.js";import{e as M}from"./chunk-JKOY2XUY.js";var b=(()=>{class t{constructor(){this.apiUrl="https://rickandmortyapi.com/api/character",this.page=c(1),this.persons=[],this.getPersons=B({request:this.page,loader:s=>M(this,[s],function*({request:e,abortSignal:o}){try{let i=yield(yield fetch(`${this.apiUrl}/?page=${e}`,{signal:o})).json();return this.persons.length>0?this.persons=this.persons.concat(i.results):this.persons=i.results,i=this.persons,i}catch(i){this.handleError(i)}})})}getColumns(){return[{property:"id",label:"Id",sortable:!0,type:"number"},{property:"name",label:"Nome",sortable:!0,type:"string"},{property:"status",label:"Status",sortable:!0,type:"label",visible:this.IsColumnVisible(),labels:[{value:"Alive",color:"color-10",label:"Vivo"},{value:"Dead",color:"color-02",label:"Morto"},{value:"unknown",color:"color-07",label:"Desconhecido"}]},{property:"species",label:"Esp\xE9cie",sortable:!0,type:"string",visible:this.IsColumnVisible()},{property:"gender",label:"G\xEAnero",sortable:!0,type:"label",visible:this.IsColumnVisible(),labels:[{value:"Female",color:"color-06",label:"Feminino"},{value:"Male",color:"color-02",label:"Masculino"},{value:"Genderless",color:"color-08",label:"Sem g\xEAnero"},{value:"unknown",color:"color-07",label:"Desconhecido"}]},{property:"location.name",label:"Localiza\xE7\xE3o",sortable:!0,type:"string",visible:this.IsColumnVisible()},{property:"type",label:"Tipo",sortable:!0,type:"string",visible:!1}]}updatePage(e){this.page.set(e)}handleError(e){throw e}IsColumnVisible(){return window.innerWidth>480}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Y=()=>["name"],J=(()=>{class t extends N{constructor(){let e=[".po-page-header",".po-row po-table-footer-show-more ng-star-inserted"];super(400,e),this.persons=y.required(),this.isLoading=y(!1),this.viewDetailPerson=C(),this.loadMorePersons=C(),this.personsService=m(b),this.columns=this.personsService.getColumns(),this.filterType=Q.contains,this.actions=[{label:"Compartilhar",action:this.viewDetail.bind(this),icon:"an an-share",disabled:!0},{label:"Detalhes",action:this.viewDetail.bind(this),icon:"an an-arrow-square-in"}]}ngAfterViewInit(){this.onResize()}loadPersons(){this.loadMorePersons.emit()}viewDetail(e){this.viewDetailPerson.emit(e)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-persons-list"]],hostBindings:function(o,s){o&1&&d("resize",function(){return s.onResize()},!1,S)},inputs:{persons:[1,"persons"],isLoading:[1,"isLoading"]},outputs:{viewDetailPerson:"viewDetailPerson",loadMorePersons:"loadMorePersons"},features:[I],decls:1,vars:12,consts:[["p-container","shadow",3,"p-show-more","p-items","p-loading","p-height","p-columns","p-draggable","p-sort","p-filtered-columns","p-hide-table-search","p-filter-type","p-actions","p-actions-right"]],template:function(o,s){o&1&&(r(0,"po-table",0),d("p-show-more",function(){return s.loadPersons()}),l()),o&2&&a("p-items",s.persons())("p-loading",s.isLoading())("p-height",s.height)("p-columns",s.columns)("p-draggable",!0)("p-sort",!0)("p-filtered-columns",v(11,Y))("p-hide-table-search",!1)("p-filter-type",s.filterType)("p-actions",s.actions)("p-actions-right",!0)},dependencies:[W,U],encapsulation:2,changeDetection:0})}}return t})();var Z=()=>[import("./chunk-B4YZGMRQ.js").then(t=>t.PersonDetailComponent)],ee=()=>[];function te(t,L){if(t&1&&(r(0,"p"),D(1,"Ops, ocorreu erro ao tentar listar os Usu\xE1rios :("),l(),D(2)),t&2){p();let e=g(3);n(2),k(" ",e," ")}}function oe(t,L){if(t&1){let e=q();r(0,"app-persons-list",3),d("loadMorePersons",function(){P(e);let s=p();return _(s.loadPersons())})("viewDetailPerson",function(s){P(e);let i=p();return _(i.viewDetail(s))}),l()}if(t&2){p();let e=g(1),o=g(2);a("persons",e)("isLoading",o)}}function se(t,L){if(t&1&&R(0,"app-person-detail",4),t&2){let e=p();a("person",e.person())}}var _e=(()=>{class t{constructor(){this.modal=T.required(u),this.page=c(1),this.personsService=m(b),this.personsResource=this.personsService.getPersons,this.person=c(void 0)}loadPersons(){this.page.update(e=>e+1),this.personsService.updatePage(this.page())}restartPersons(){this.personsResource.reload()}viewDetail(e){this.person.set(e),this.modal().open()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-persons"]],viewQuery:function(o,s){o&1&&z(s.modal,u,5),o&2&&j()},decls:10,vars:7,consts:[["p-title","Rick & Morty | Personagens","p-subtitle","Exemplo de uso da API resource"],[3,"persons","isLoading"],["p-size","lg",3,"p-title"],[3,"loadMorePersons","viewDetailPerson","persons","isLoading"],[3,"person"]],template:function(o,s){if(o&1&&(r(0,"po-page-default",0),A(1)(2)(3),w(4,te,3,1)(5,oe,1,2,"app-persons-list",1),r(6,"po-modal",2),w(7,se,1,1),V(8,7,Z),l()()),o&2){let i;n(),f(s.personsResource.value()||v(6,ee)),n(),f(s.personsResource.isLoading()),n();let K=f(s.personsResource.error());n(),E(K?4:5),n(2),a("p-title",((i=s.person())==null?null:i.name)||"Detalhes"),n(2),F(!s.modal().isHidden)}},dependencies:[$,G,H,u,J],encapsulation:2})}}return t})();export{_e as PersonsComponent};
