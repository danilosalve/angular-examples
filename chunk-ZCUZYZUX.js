import{Aa as D,Ba as M,Bc as X,Ca as L,D as I,Dc as Y,E as u,Ea as v,H as h,J as R,K as s,Oa as P,P as q,Q as c,Ra as k,Ub as A,V as y,Vb as Q,Xb as C,Yb as U,ba as r,da as _,ia as a,ja as p,jc as G,ka as g,kc as N,ma as w,na as f,oa as l,q as F,ra as z,sa as B,sc as W,ta as x,u as b,va as j,vc as $,wc as O,x as d,xc as J,y as m,yc as K}from"./chunk-4OWNAJ7V.js";import{d as H}from"./chunk-4CLCTAJ7.js";function oe(o,T){if(o&1&&(a(0,"po-container",1)(1,"div",2),g(2,"po-image",3),p(),a(3,"div",4),g(4,"po-info",5)(5,"po-info",6)(6,"po-info",7),p()()),o&2){let e=l();s(2),r("p-src",e.image())("p-height",240),s(2),r("p-value",e.species()),s(),r("p-value",e.type()),s(),r("p-value",e.episodes().toString())}}var ee=(()=>{class o{constructor(){this.person=u.required(),this.episodes=P(()=>(this.person().episode||[]).length),this.image=P(()=>this.person().image||""),this.species=P(()=>this.person().species||""),this.type=P(()=>this.person().type||"N\xE3o informado")}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=c({type:o,selectors:[["app-person-detail"]],inputs:{person:[1,"person"]},decls:2,vars:1,consts:[[1,"po-row"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"po-md-5","po-lg-5"],["p-alt","Foto do Personagem","p-loading","lazy",3,"p-src","p-height"],[1,"po-md-7","po-lg-7"],["p-label","Especie",3,"p-value"],["p-label","Tipo",3,"p-value"],["p-label","Quantidades de Episodios",3,"p-value"]],template:function(t,i){t&1&&(a(0,"div",0),y(1,oe,7,5,"po-container",1),p()),t&2&&(s(),_(i.person()?1:-1))},dependencies:[K,J,Q,A,O,$],encapsulation:2,changeDetection:0})}}return o})();var S=(()=>{class o{constructor(){this.apiUrl="https://rickandmortyapi.com/api/character",this.page=h(1),this.persons=[],this.getPersons=k({request:this.page,loader:i=>H(this,[i],function*({request:e,abortSignal:t}){try{let n=yield(yield fetch(`${this.apiUrl}/?page=${e}`,{signal:t})).json();return this.persons.length>0?this.persons=this.persons.concat(n.results):this.persons=n.results,n=this.persons,n}catch(n){this.handleError(n)}})})}getColumns(){return[{property:"id",label:"Id",sortable:!0,type:"number"},{property:"name",label:"Nome",sortable:!0,type:"string"},{property:"status",label:"Status",sortable:!0,type:"label",visible:this.IsColumnVisible(),labels:[{value:"Alive",color:"color-10",label:"Vivo"},{value:"Dead",color:"color-02",label:"Morto"},{value:"unknown",color:"color-07",label:"Desconhecido"}]},{property:"species",label:"Esp\xE9cie",sortable:!0,type:"string",visible:this.IsColumnVisible()},{property:"gender",label:"G\xEAnero",sortable:!0,type:"label",visible:this.IsColumnVisible(),labels:[{value:"Female",color:"color-06",label:"Feminino"},{value:"Male",color:"color-02",label:"Masculino"},{value:"Genderless",color:"color-08",label:"Sem g\xEAnero"},{value:"unknown",color:"color-07",label:"Desconhecido"}]},{property:"location.name",label:"Localiza\xE7\xE3o",sortable:!0,type:"string",visible:this.IsColumnVisible()},{property:"type",label:"Tipo",sortable:!0,type:"string",visible:!1}]}updatePage(e){this.page.set(e)}handleError(e){throw e}IsColumnVisible(){return window.innerWidth>480}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=F({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var ie=()=>[],ne=()=>["name"],te=(()=>{class o{constructor(){this.persons=u.required(),this.isLoading=u(!1),this.viewDetailPerson=I(),this.loadMorePersons=I(),this.personsService=b(S),this.columns=this.personsService.getColumns(),this.height=400,this.filterType=G.contains,this.actions=[{label:"Compartilhar",action:this.viewDetail.bind(this),icon:"an an-share",disabled:!0},{label:"Detalhes",action:this.viewDetail.bind(this),icon:"an an-arrow-square-in"}]}onResize(){setTimeout(()=>this.setHeight(),200)}loadPersons(){this.loadMorePersons.emit()}viewDetail(e){this.viewDetailPerson.emit(e)}ngAfterViewInit(){this.onResize()}setHeight(){let e=[];e.push(this.getElementHeightById(".po-page-header")),e.push(this.getElementHeightById(".po-row po-table-footer-show-more ng-star-inserted")),this.height=this.calculateHeight(e)-145}getElementHeightById(e){let t=document.querySelector(e);return t?t.clientHeight:0}calculateHeight(e){return e.reduce((t,i)=>t-i,window.innerHeight)}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=c({type:o,selectors:[["app-persons-list"]],hostBindings:function(t,i){t&1&&f("resize",function(){return i.onResize()},!1,R)},inputs:{persons:[1,"persons"],isLoading:[1,"isLoading"]},outputs:{viewDetailPerson:"viewDetailPerson",loadMorePersons:"loadMorePersons"},decls:2,vars:13,consts:[["p-container","shadow",3,"p-show-more","p-items","p-loading","p-height","p-columns","p-draggable","p-sort","p-filtered-columns","p-hide-table-search","p-filter-type","p-actions","p-actions-right"]],template:function(t,i){if(t&1){let n=w();D(0),a(1,"po-table",0),f("p-show-more",function(){return d(n),m(i.loadPersons())}),p()}if(t&2){let n=i.persons()||v(11,ie);s(),r("p-items",n)("p-loading",i.isLoading())("p-height",i.height)("p-columns",i.columns)("p-draggable",!0)("p-sort",!0)("p-filtered-columns",v(12,ne))("p-hide-table-search",!1)("p-filter-type",i.filterType)("p-actions",i.actions)("p-actions-right",!0)}},dependencies:[W,N],encapsulation:2,changeDetection:0})}}return o})();var se=()=>[];function re(o,T){if(o&1&&(a(0,"p"),x(1,"Ops, ocorreu erro ao tentar listar os Usu\xE1rios :("),p(),x(2)),o&2){l();let e=L(3);s(2),j(" ",e," ")}}function ae(o,T){if(o&1){let e=w();a(0,"app-persons-list",4),f("loadMorePersons",function(){d(e);let i=l();return m(i.loadPersons())})("viewDetailPerson",function(i){d(e);let n=l();return m(n.viewDetail(i))}),p()}if(o&2){l();let e=L(1),t=L(2);r("persons",e)("isLoading",t)}}var Ee=(()=>{class o{constructor(){this.modal=q.required(C),this.page=h(1),this.personsService=b(S),this.personsResource=this.personsService.getPersons,this.person=h(void 0)}loadPersons(){this.page.update(e=>e+1),this.personsService.updatePage(this.page())}restartPersons(){this.personsResource.reload()}viewDetail(e){this.person.set(e),this.modal().open()}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=c({type:o,selectors:[["app-persons"]],viewQuery:function(t,i){t&1&&z(i.modal,C,5),t&2&&B()},decls:8,vars:7,consts:[["p-title","Rick & Morty | Personagens","p-subtitle","Exemplo de uso da API resource"],[3,"persons","isLoading"],["p-size","lg",3,"p-title"],[3,"person"],[3,"loadMorePersons","viewDetailPerson","persons","isLoading"]],template:function(t,i){if(t&1&&(a(0,"po-page-default",0),D(1)(2)(3),y(4,re,3,1)(5,ae,1,2,"app-persons-list",1),a(6,"po-modal",2),g(7,"app-person-detail",3),p()()),t&2){let n;s(),M(i.personsResource.value()||v(6,se)),s(),M(i.personsResource.isLoading()),s();let V=M(i.personsResource.error());s(),_(V?4:5),s(2),r("p-title",((n=i.person())==null?null:n.name)||"Detalhes"),s(),r("person",i.person())}},dependencies:[Y,X,U,C,te,ee],encapsulation:2})}}return o})();export{Ee as PersonsComponent};
