import{A as ie,Aa as fe,B as ne,C as re,Ca as he,Da as ye,E as ae,N as pe,P as le,R as se,Ra as _,S as ce,Sa as b,ca as C,da as ue,l as $,m as X,na as me,o as Z,q as ee,r as oe,ua as de,y as te}from"./chunk-3H4NJUFE.js";import"./chunk-SBPM3P26.js";import{$b as g,Ac as O,Bc as j,Cb as h,Cc as v,Dc as Y,Ea as u,Gc as U,Ha as L,Hc as G,Ic as J,L as D,Nb as k,P as F,Rb as T,Ub as n,ac as N,ca as Q,cc as A,dc as q,ec as p,fc as l,gc as s,ia as f,id as d,jb as a,kc as V,pc as W,qc as y,sa as w,sb as R,t as B,ta as E,ud as K,xb as m,yd as z,zc as H}from"./chunk-ROBB4PN5.js";import"./chunk-JKOY2XUY.js";var Ce="bb473bd526d14ff4d168d83cc33d1f8e79f003f668b5cfc2c6e245b269144b93";var ge=(()=>{class e{constructor(){this.apiUrl="https://economia.awesomeapi.com.br/json/last",this.headers=new K({"x-api-key":Ce}),this.http=f(z)}getByCurrencyIds(o){return this.http.get(`${this.apiUrl}/${o.join(",")}`,{headers:this.headers})}getCurrencyOptions(){return[{label:"D\xF3lar Americano \u2192 Real Brasileiro",value:"USD-BRL"},{label:"Euro \u2192 Real Brasileiro",value:"EUR-BRL"},{label:"Peso (ARS) \u2192 Real Brasileiro",value:"ARS-BRL"},{label:"Libra esterlina \u2192 Real Brasileiro",value:"GBP-BRL"},{label:"Iene Japon\xEAs \u2192 Real Brasileiro",value:"JPY-BRL"},{label:"Yuan Chin\xEAs \u2192 Real Brasileiro",value:"CNY-BRL"}]}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var M=class{constructor(r){this.formatter=r}mapFromQuotes(r){let o=[];return Object.keys(r).forEach(i=>{let t=r[i];if(t){let c={name:t.name,ask:this.formatter.format(t.ask),bid:this.formatter.format(t.bid),high:this.formatter.format(t.high),low:this.formatter.format(t.low)};o.push(c)}}),o}};var I=class{format(r){return(typeof r=="string"?parseFloat(r):r).toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:4,maximumFractionDigits:4})}};var x=(()=>{class e{constructor(){this.label=u.required(),this.help=u(""),this.value=u.required()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=m({type:e,selectors:[["app-currency-info"]],inputs:{label:[1,"label"],help:[1,"help"],value:[1,"value"]},decls:9,vars:6,consts:[["appElement",""],["target",""],[1,"po-row"],[1,"po-sm-11","po-md-11","po-lg-11","po-xl-11",3,"p-label","p-value"],[1,"po-sm-1","po-md-1","po-lg-1","po-xl-1"],["p-icon","an an-question",1,"po-clickable",3,"p-tooltip"],["p-trigger","click",3,"p-target","p-hide-arrow"],[1,"po-font-text-small"]],template:function(i,t){if(i&1&&(p(0,"div",2),s(1,"po-info",3),p(2,"div",4,0),s(4,"po-icon",5,1),l()(),p(6,"po-popover",6)(7,"p",7),v(8),l()()),i&2){let c=j(3);a(),n("p-label",t.label())("p-value",t.value()),a(3),n("p-tooltip",t.help()),a(2),n("p-target",c)("p-hide-arrow",!0),a(2),Y(t.help())}},dependencies:[ne,ie,ye,he,ce,se,ae,re],encapsulation:2,changeDetection:0})}}return e})();var Me=()=>[x];function Ie(e,r){if(e&1&&s(0,"app-currency-info",3)(1,"app-currency-info",4)(2,"app-currency-info",5),e&2){let o=y(2);n("value",o.bid()),a(),n("value",o.high()),a(),n("value",o.low())}}function Pe(e,r){e&1&&(p(0,"p",6,0),v(2,"Ver mais Informa\xE7\xF5es"),l())}function we(e,r){if(e&1&&(p(0,"po-widget",1),s(1,"app-currency-info",2),h(2,Ie,3,3)(3,Pe,3,0),k(4,2,Me,null,3),T(0,-1),l()),e&2){let o=y();n("p-title",o.name()),a(),n("value",o.ask())}}var _e=(()=>{class e{constructor(){this.info=u.required(),this.ask=d(()=>this.info().ask),this.bid=d(()=>this.info().bid),this.low=d(()=>this.info().low),this.high=d(()=>this.info().high),this.name=d(()=>this.info().name)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=m({type:e,selectors:[["app-currency"]],inputs:{info:[1,"info"]},decls:1,vars:1,consts:[["complement",""],[1,"po-sm-12","po-md-12","po-lg-6","po-xl-4","po-mb-2",3,"p-title"],["label","Ask","help","Pre\xE7o de venda, pre\xE7o que o mercado est\xE1 pedindo para vender uma moeda",3,"value"],["label","Bid","help","Pre\xE7o de compra, pre\xE7o que o mercado est\xE1 disposto a pagar",3,"value"],["label","High","help","Maior valor alcan\xE7ado no dia",3,"value"],["label","Low","help","Menor valor alcan\xE7ado no dia",3,"value"],[1,"po-font-text-bold"]],template:function(i,t){i&1&&h(0,we,6,2,"po-widget",1),i&2&&g(t.info()?0:-1)},dependencies:[b,_,x],encapsulation:2,changeDetection:0})}}return e})();var Ee=["infoModal"];function Se(e,r){if(e&1&&s(0,"app-currency",5),e&2){let o=r.$implicit;n("info",o)}}function xe(e,r){if(e&1&&A(0,Se,1,1,"app-currency",5,N),e&2){let o=y();q(o.currencyInfo)}}var ro=(()=>{class e{constructor(){this.infoModal=R.required("infoModal",{read:C}),this.currencyQuotesServices=f(ge),this.poNotification=f(me),this.options=this.currencyQuotesServices.getCurrencyOptions(),this.currencyIds=L([]),this.isHideLoading=!0,this.currencyInfo=[],this.currencyInfoMapper=new M(new I)}getCurrencyQuotes(){(this.currencyIds()?.length??0)>0?(this.isHideLoading=!1,this.currencyQuotesServices.getByCurrencyIds(this.currencyIds()).pipe(B(o=>this.currencyInfoMapper.mapFromQuotes(o)),D(1),F(()=>this.isHideLoading=!0)).subscribe({next:o=>{this.currencyInfo=o,this.infoModal().open()},error:()=>this.poNotification.error("N\xE3o foi poss\xEDvel obter as cota\xE7\xF5es")})):this.poNotification.error("Selecione uma ou mais Moedas para obter as cota\xE7\xF5es")}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=m({type:e,selectors:[["app-currency-quotes"]],viewQuery:function(i,t){i&1&&H(t.infoModal,Ee,5,C),i&2&&O()},decls:7,vars:7,consts:[["infoModal",""],["p-title","Cota\xE7\xF5es","p-primary-label","Obter Cota\xE7\xF5es",3,"p-primary-action","p-height"],["name","currencyIds","p-placeholder","Selecione um ou mais moedas",3,"ngModelChange","ngModel","p-options","p-hide-search","p-hide-select-all"],["p-title","Cota\xE7\xF5es"],["p-text","Buscando Cota\xE7\xF5es",3,"hidden"],[3,"info"]],template:function(i,t){if(i&1){let c=V();p(0,"po-widget",1),W("p-primary-action",function(){return w(c),E(t.getCurrencyQuotes())}),p(1,"form")(2,"po-multiselect",2),J("ngModelChange",function(P){return w(c),G(t.currencyIds,P)||(t.currencyIds=P),E(P)}),l()(),p(3,"po-modal",3,0),h(5,xe,2,0),l()(),s(6,"po-loading-overlay",4)}i&2&&(n("p-height",220),a(2),U("ngModel",t.currencyIds),n("p-options",t.options)("p-hide-search",!0)("p-hide-select-all",!0),a(3),g(t.currencyInfo.length>0?5:-1),a(),n("hidden",t.isHideLoading))},dependencies:[fe,de,b,_,ue,C,le,pe,_e,te,oe,$,X,ee,Z],encapsulation:2})}}return e})();export{ro as CurrencyQuotesComponent};
