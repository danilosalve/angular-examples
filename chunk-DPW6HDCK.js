import{b as fe}from"./chunk-4F3FI4ST.js";import{Aa as P,Ba as O,Bc as me,Ca as H,Db as G,E as h,Ea as K,F as D,H as d,Ha as E,Hc as ue,Ib as J,Ic as he,Ja as M,K as n,Kb as X,Oa as N,Ob as Y,P as S,Pb as Z,Q as f,Sb as ee,T as $,Tb as te,V as x,Ya as U,ba as a,bb as z,ca as A,da as C,ec as oe,fa as W,fc as ie,ga as w,ha as L,ia as r,ja as p,ka as m,ma as j,n as k,na as V,nc as _,oa as v,oc as ne,pc as re,q as Q,ra as I,rc as pe,sa as b,ta as c,tc as ae,u as y,ua as B,uc as se,va as R,vc as ce,wc as le,x as F,y as q,zc as de}from"./chunk-IHS4TJ4W.js";import"./chunk-4CLCTAJ7.js";function ye(e,s){if(e&1&&m(0,"i"),e&2){let t=s.$index,i=v();A(i.getStarClass(t+1))}}function Se(e,s){if(e&1&&(r(0,"p",1),c(1),p()),e&2){let t=v();n(),R("Avalia\xE7\xF5es: (",t.count(),")")}}var ge=(()=>{class e{constructor(){this.rating=h.required(),this.max=h.required(),this.count=h(0),this.stars=[]}ngOnInit(){for(let t=0;t<this.max();t++)this.stars.push(t)}getStarClass(t){return t<=this.rating()?"an-fill an-star":t-1+.5<this.rating()?"an-fill an-star-half":"an an-star"}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=f({type:e,selectors:[["app-rating"]],inputs:{rating:[1,"rating"],max:[1,"max"],count:[1,"count"]},decls:3,vars:1,consts:[[3,"class"],[1,"po-font-text-smaller"]],template:function(i,o){i&1&&(w(0,ye,1,2,"i",0,W),x(2,Se,2,1,"p",1)),i&2&&(L(o.stars),n(2),C(o.count()?2:-1))},encapsulation:2})}}return e})();var we=["poImage"],Ce=(()=>{class e{constructor(){this.poImageRef=S.required("poImage",{read:D}),this.product=h.required(),this.height=d(280),this.image=d(40),this.imageHeight=N(()=>this.height()-this.image())}ngOnInit(){this.isSmartPhone()&&(this.height.set(610),this.image.set(300))}isSmartPhone(){return window.innerWidth<481}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=f({type:e,selectors:[["app-product-card"]],viewQuery:function(i,o){i&1&&I(o.poImageRef,we,5,D),i&2&&b()},inputs:{product:[1,"product"]},decls:15,vars:16,consts:[["poImage",""],[1,"po-sm-12","po-md-12","po-lg-6","po-xl-4","po-mb-2",3,"p-height"],[1,"po-row"],[1,"po-md-5","po-lg-5"],["p-loading","lazy",3,"p-src","p-alt","p-height"],["p-trigger","click","p-title","Descri\xE7\xE3o","p-position","bottom",3,"p-target","p-hide-arrow"],[1,"po-md-7","po-lg-7"],[1,"po-font-text-large-bold","po-mb-1"],[1,"po-mb-1",3,"p-value"],["p-label","Pre\xE7o",3,"p-value"],[3,"rating","max","count"]],template:function(i,o){if(i&1&&(r(0,"po-widget",1),P(1),E(2,"currency"),r(3,"div",2)(4,"div",3),m(5,"po-image",4,0),r(7,"po-popover",5),c(8),p()(),r(9,"div",6)(10,"p",7),c(11),p(),m(12,"po-tag",8)(13,"po-info",9)(14,"app-rating",10),p()()()),i&2){let l;a("p-height",o.height());let u=(l=M(2,13,o.product().price,"BRL"))!==null&&l!==void 0?l:0;n(5),a("p-src",o.product().image)("p-alt",o.product().description)("p-height",o.imageHeight()),n(2),a("p-target",o.poImageRef())("p-hide-arrow",!0),n(),R(" ",o.product().description," "),n(3),B(o.product().title),n(),a("p-value",o.product().category),n(),a("p-value",u.toString()),n(),a("rating",o.product().rating.rate)("max",5)("count",o.product().rating.count)}},dependencies:[he,ue,se,ae,X,J,ge,U,le,ce,ie,oe],encapsulation:2,changeDetection:0})}}return e})();var ve=(()=>{class e{constructor(){this.apiUrl="https://fakestoreapi.com/products",this.limit=d(10),this.http=y(z),this.getProducts=fe({request:this.limit,loader:({request:t})=>this.http.get(`${this.apiUrl}?limit=${t}`).pipe(k(1))})}updateLimit(t){this.limit.set(t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Pe=(()=>{class e{transform(t,i){return i?t.filter(o=>o.title.toLocaleLowerCase().startsWith(i.toLocaleLowerCase())||o.category.toLocaleLowerCase().startsWith(i.toLocaleLowerCase())):t}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275pipe=$({name:"productsSearch",type:e,pure:!0})}}return e})();var Le=(e,s)=>s.id,Ie=()=>[];function be(e,s){if(e&1&&m(0,"app-product-card",7),e&2){let t=s.$implicit;a("product",t)}}function Re(e,s){e&1&&(r(0,"p"),c(1,"Nenhum produto encontrado."),p())}function Ee(e,s){if(e&1&&w(0,be,1,1,"app-product-card",7,Le,!1,Re,2,0,"p"),e&2){v();let t=H(1);L(t)}}function Me(e,s){e&1&&(r(0,"p"),c(1,"Nenhum produto encontrado."),p())}function Te(e,s){e&1&&(r(0,"p",5),c(1,"Ops, ocorreu erro ao tentar listar os Produtos :("),p())}var ot=(()=>{class e{constructor(){this.filter=d(""),this.filterKeys=["title","category"],this.limit=d(10),this.poSelect=S.required(_),this.productsService=y(ve),this.productsResource=this.productsService.getProducts,this.optionsLimit=[{label:"10",value:10},{label:"15",value:15},{label:"30",value:30}]}ngAfterContentInit(){this.poSelect().modelValue=this.limit()}onChangeLimit(t){this.limit.set(t),this.productsService.updateLimit(this.limit())}onChangeFilter(t){this.filter.set(t.value)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=f({type:e,selectors:[["app-products"]],viewQuery:function(i,o){i&1&&I(o.poSelect,_,5),i&2&&b()},decls:14,vars:13,consts:[["p-title","Produtos","p-subtitle","Exemplo de uso da API RxResource"],[1,"po-row"],["p-label","Itens por p\xE1gina","name","limit",1,"po-sm-12","po-md-4","po-lg-2","po-xl-2",3,"p-change","p-options"],["p-aria-label","Campos para pesquisa de Produtos",1,"po-sm-12","po-md-8","po-lg-4","po-xl-3","po-mt-md-4","po-mt-lg-4","po-mt-xl-4",3,"p-filter","p-items","p-disabled","p-filter-keys","p-show-listbox"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mb-5"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mb-2"],["p-text","Carregando produtos",3,"hidden"],[3,"product"]],template:function(i,o){if(i&1){let l=j();r(0,"po-page-default",0),P(1),E(2,"productsSearch"),P(3)(4)(5),r(6,"div",1)(7,"po-select",2),V("p-change",function(g){return F(l),q(o.onChangeLimit(g))}),p(),r(8,"po-search",3),V("p-filter",function(g){return F(l),q(o.onChangeFilter(g))}),p(),r(9,"po-container",4),x(10,Ee,3,1)(11,Me,2,0,"p")(12,Te,2,0,"p",5),m(13,"po-loading-overlay",6),p()()()}if(i&2){n();let l=O(M(2,8,o.productsResource.value()||K(12,Ie),o.filter())),u=o.productsResource.hasValue(),g=o.productsResource.isLoading(),_e=o.productsResource.error();n(6),a("p-options",o.optionsLimit),n(),a("p-items",l)("p-disabled",!u)("p-filter-keys",o.filterKeys)("p-show-listbox",!0),n(2),C(u?10:11),n(2),C(_e?12:-1),n(),a("hidden",!g)}},dependencies:[me,de,Z,Y,te,ee,pe,_,re,ne,Ce,G,Pe],encapsulation:2})}}return e})();export{ot as ProductsComponent};
