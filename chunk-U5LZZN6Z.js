import{a as u,b as Se,c as ve,d as be,e as _e,f as xe,g as we}from"./chunk-OAESVCKP.js";import{a as Ce}from"./chunk-2EXCVBQC.js";import{$ as pe,Aa as ce,Ca as me,Da as ue,Ga as de,Ha as ge,Ia as fe,Ma as he,N as re,Na as ye,P as ae,_ as se,l as oe,q as ne,ta as le,y as ie}from"./chunk-3H4NJUFE.js";import{t as ee}from"./chunk-SBPM3P26.js";import{$b as j,Bb as W,Cb as L,Cc as N,Da as A,Ec as O,G as H,Ga as M,Gc as Y,Hc as G,Ic as J,J as F,Mc as K,O as k,P as y,Ub as l,X as _,_ as g,b as q,ca as z,d as E,ec as c,fc as m,gc as I,h as D,hb as R,hd as X,ia as s,id as Z,jb as p,jd as $,n as B,pc as d,qa as U,qc as Q,r as T,t as h,tb as V,xa as x,xb as C,ya as w,yd as te}from"./chunk-ROBB4PN5.js";import"./chunk-JKOY2XUY.js";var Le=(()=>{class e{constructor(){this.query=V(""),this.queryChange=A()}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-search-box"]],inputs:{query:[1,"query"]},outputs:{query:"queryChange",queryChange:"queryChange"},decls:1,vars:2,consts:[["p-icon","an an-magnifying-glass","p-placeholder","Pesquisar mutantes...","p-clean","","name","query","p-help","Efetue a busca utilizando Apelido, E-mail ou Nome",3,"ngModelChange","p-no-autocomplete","ngModel"]],template:function(o,n){o&1&&(c(0,"po-input",0),J("ngModelChange",function(r){return G(n.query,r)||(n.query=r),r}),d("ngModelChange",function(r){return n.queryChange.emit(r)}),m()),o&2&&(l("p-no-autocomplete",!0),Y("ngModel",n.query))},dependencies:[ie,oe,ne,ce,le],encapsulation:2,changeDetection:0})}}return e})();var je=(()=>{class e{constructor(){this.http=s(te)}getUsers(t=""){return this.http.get("assets/json/user.db.json").pipe(h(o=>o.users),h(o=>t?o.filter(n=>n.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())||n.nickname.toLocaleLowerCase().includes(t.toLocaleLowerCase())||n.email.toLocaleLowerCase().includes(t.toLocaleLowerCase())):o))}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function S(e,i){i?.injector||U(S);let t=i?.injector??s(x),o=new D,n=e(o).subscribe();t.get(w).onDestroy(()=>n.unsubscribe());let a=(r,Pe)=>{if(Be(r))return o.next(r),{destroy:q};let qe=Te(),v=Pe?.injector??qe??t;if(M(r)){let f=$(()=>{let Ee=r();X(()=>o.next(Ee))},{injector:v});return n.add({unsubscribe:()=>f.destroy()}),f}let b=r.subscribe(f=>o.next(f));return n.add(b),v!==t&&v.get(w).onDestroy(()=>b.unsubscribe()),{destroy:()=>b.unsubscribe()}};return a.destroy=n.unsubscribe.bind(n),a}function Be(e){return!M(e)&&!T(e)}function Te(){try{return s(x)}catch{return}}function Ie(e,i,t){let o=typeof e=="function"?{next:e,error:i,complete:t}:e;return n=>n.pipe(g({next:o.next,complete:o.complete}),H(a=>(o.error(a),B)),o.finalize?y(o.finalize):a=>a)}var He={users:[],isLoading:!1,query:"",error:null},P=Se(we(He),ve(()=>({userService:s(je)})),be(({users:e})=>({userCount:Z(()=>e().length)})),xe(e=>({updateQuery(i){u(e,{query:i})},loadUsers:S(i=>i.pipe(_(()=>e.userService.getUsers().pipe(g({next:t=>u(e,{users:t,isLoading:!1,error:null}),error:()=>u(e,{error:"Falha ao carregar usu\xE1rios",isLoading:!1})}))))),loadByQuery:S(E(F(300),k(),g(()=>u(e,{isLoading:!0})),_(i=>e.userService.getUsers(i).pipe(Ie({next:t=>u(e,{users:t}),error:()=>u(e,{isLoading:!1,error:"Falha ao carregar usu\xE1rios"})}),y(()=>u(e,{isLoading:!1}))))))})),_e({onInit({loadByQuery:e,query:i}){e(i)}}));function Fe(e,i){e&1&&I(0,"po-loading-overlay")}function ke(e,i){if(e&1&&(c(0,"div",1),I(1,"po-info",9)(2,"po-info",10)(3,"po-info",11),m()),e&2){let t=i.$implicit;p(),l("p-value",t.nickname),p(),l("p-value",t.email),p(),l("p-value",t.description)}}function ze(e,i){if(e&1&&(c(0,"div",1)(1,"po-list-view",7),L(2,ke,4,3,"ng-template",8),m()()),e&2){let t=Q();p(),l("p-height",t.height)("p-items",t.store.users())}}var vt=(()=>{class e extends Ce{constructor(){super("signals/samples"),this.store=s(P),this.height=300}ngAfterViewInit(){this.onResize()}ngOnInit(){this.store.loadUsers()}onResize(){setTimeout(()=>this.setHeight(),200)}setHeight(){let t=[];t.push(this.getElementHeightById(".po-page-header")),t.push(this.getElementHeightById(".search")),this.height=this.calculateHeight(t)-150}getElementHeightById(t){let o=document.querySelector(t);return o?o.clientHeight:0}calculateHeight(t){return t.reduce((o,n)=>o-n,window.innerHeight)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-signals-store"]],hostBindings:function(o,n){o&1&&d("resize",function(){return n.onResize()},!1,R)},features:[K([P]),W],decls:10,vars:4,consts:[["p-title","Store","p-subtitle","Exemplo de uso do SignalsStore",3,"p-back"],[1,"po-row"],[1,"po-mb-5","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"po-row","search"],[1,"po-xl-3","po-lg-4","po-md-8","po-sm-12","po-mb-1",3,"queryChange","query"],[1,"po-xl-12","po-lg-12","po-md-12","po-sm-12","po-mb-2"],[1,"po-font-text-small"],["p-property-title","name",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12",3,"p-height","p-items"],["p-list-view-content-template",""],["p-label","Apelido",1,"po-sm-12","po-md-6","po-lg-3","po-xl-3",3,"p-value"],["p-label","Email",1,"po-sm-12","po-md-6","po-lg-9","po-xl-9",3,"p-value"],["p-label","Descri\xE7\xE3o",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12",3,"p-value"]],template:function(o,n){o&1&&(c(0,"po-page-detail",0),d("p-back",function(){return n.onBack()}),c(1,"div",1)(2,"po-container",2)(3,"div",3)(4,"app-search-box",4),d("queryChange",function(r){return n.store.updateQuery(r)}),m(),c(5,"div",5)(6,"p",6),N(7),m()()(),L(8,Fe,1,0,"po-loading-overlay")(9,ze,3,2,"div",1),m()()()),o&2&&(p(4),l("query",n.store.query()),p(3),O("Mutantes: ",n.store.userCount(),""),p(),j(n.store.isLoading()?8:-1),p(),j(n.store.isLoading()?-1:9))},dependencies:[ee,Le,ye,he,ae,re,fe,ge,de,ue,me,pe,se],encapsulation:2})}}return e})();export{vt as SignalsStoreComponent};
