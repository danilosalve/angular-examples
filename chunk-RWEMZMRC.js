import{a as Ce,b as ge}from"./chunk-HEYHOMJR.js";import{a as he}from"./chunk-Y6F5FJWB.js";import{Aa as le,B as X,C as Y,Da as ce,E as Z,Fa as de,La as ue,Ma as fe,O as ee,Q as oe,R as te,S as ne,W as ie,X as pe,f as A,ka as re,pa as ae,q as U,r as J,va as me,w as K,y as Q,za as se}from"./chunk-C7IOG66E.js";import{$b as M,Ab as h,Ad as z,Cc as W,D,Da as H,Dc as j,Ea as O,Ec as I,Gd as R,H as B,I as N,Lc as P,Mc as v,O as $,P as b,Rb as m,Xb as C,Yb as L,_b as w,a as E,ac as p,bc as i,cc as s,gc as _,hb as n,ia as c,ic as x,jc as l,n as F,s as S,sa as g,ta as k,ub as f,vc as d,wc as T,yc as G,yd as q}from"./chunk-BMGFER63.js";import"./chunk-4CLCTAJ7.js";function ve(o,a){if(o&1&&s(0,"app-types-of-pokemon",5),o&2){let e=a.$implicit;m("typeofPokemon",e.type.name)}}function ye(o,a){if(o&1){let e=_();p(0,"po-widget",1),x("p-click",function(){g(e);let r=l();return k(r.onClick())}),s(1,"po-image",2),p(2,"p",3),d(3),P(4,"idPokemon"),i(),p(5,"p",4),d(6),P(7,"titlecase"),i(),w(8,ve,1,1,"app-types-of-pokemon",5,L),i()}if(o&2){let e=l();n(),m("p-src",e.pokemon().sprites.other["official-artwork"].front_default||e.pokemon().sprites.front_default||""),n(2),T(v(4,3,e.pokemon().id)),n(3),T(v(7,5,e.pokemon().name)),n(2),M(e.pokemon().types)}}function Se(o,a){o&1&&(p(0,"p"),d(1,"Pokemon inv\xE1lido"),i())}var xe=(()=>{class o{constructor(){this.pokemon=O.required(),this.router=c(A)}onClick(){this.router.navigate([`/pokedex/detail/${this.pokemon().id}`])}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=f({type:o,selectors:[["app-pokemon-card"]],inputs:{pokemon:[1,"pokemon"]},decls:2,vars:1,consts:[[1,"po-xl-2","po-lg-4","po-md-6","po-sm-12","po-mb-2"],[1,"po-xl-2","po-lg-4","po-md-6","po-sm-12","po-mb-2",3,"p-click"],["p-loading","lazy","p-alt","Imagem do pokemon",3,"p-src"],[1,"po-font-text-smaller"],[1,"po-font-text-large-bold"],[3,"typeofPokemon"]],template:function(t,r){t&1&&h(0,ye,10,7,"po-widget",0)(1,Se,2,0,"p"),t&2&&C(r.pokemon()?0:1)},dependencies:[fe,ue,le,se,z,Ce,ge],encapsulation:2})}}return o})();var Pe=(()=>{class o{constructor(){this.fb=c(Y),this.notifcation=c(re),this.changeInValue=H(),this.form=this.fb.group({search:[""]}),this.search$=new E}ngOnInit(){this.onChangeValue()}ngOnDestroy(){this.search$.unsubscribe()}onChangeValue(){this.search$=this.form.valueChanges.pipe(N(300),$(),D(e=>(e?.search?.length||0)>=3||!e.search?.length),S(e=>e.search?.toLowerCase())).subscribe({next:e=>this.changeInValue.emit(e||""),error:()=>this.notifcation.error("Falha executar filtro")})}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=f({type:o,selectors:[["app-search"]],outputs:{changeInValue:"changeInValue"},decls:2,vars:2,consts:[[3,"formGroup"],["p-icon","an an-magnifying-glass","p-placeholder","Pesquisar...","formControlName","search","name","search","p-clean","",3,"p-no-autocomplete"]],template:function(t,r){t&1&&(p(0,"form",0),s(1,"po-input",1),i()),t&2&&(m("formGroup",r.form),n(),m("p-no-autocomplete",!0))},dependencies:[me,ae,Z,K,U,J,Q,X],encapsulation:2})}}return o})();function Le(o,a){if(o&1&&(p(0,"p",4),d(1),i()),o&2){l();let e=I(1);n(),G(" Exibindo: 1 - ",e==null||e.results==null?null:e.results.length," de ",e==null?null:e.count," ")}}function we(o,a){if(o&1&&s(0,"app-pokemon-card",6),o&2){let e=a.$implicit;m("pokemon",e)}}function Me(o,a){if(o&1){let e=_();p(0,"po-container",2),w(1,we,1,1,"app-pokemon-card",6,L),i(),p(3,"po-container",7)(4,"po-button",8),x("p-click",function(){g(e);let r=l();return k(r.onShowMore())}),i()()}if(o&2){let e=l(),t=I(1);n(),M(t==null?null:t.results),n(3),m("p-disabled",(t==null?null:t.next)===null)("p-loading",!e.isHideLoading)}}function be(o,a){o&1&&s(0,"po-loading-overlay",9)}function Te(o,a){o&1&&(p(0,"po-container",7)(1,"p",10),d(2,"Nenhum Pok\xE9mon foi encontrado"),i()())}function Ie(o,a){if(o&1&&h(0,be,1,0,"po-loading-overlay",9)(1,Te,3,0,"po-container",7),o&2){let e=l();C(e.isLoadShowMore?0:1)}}var oo=(()=>{class o{constructor(){this.pokemonService=c(he),this.results=[],this.isHideLoading=!1,this.offset=0,this.isLoadShowMore=!1}ngOnInit(){this.getPokemons(0)}onShowMore(){this.isLoadShowMore=!0,this.offset+=12,this.getPokemons(this.offset)}getPokemons(e){this.pokemons$=this.pokemonService.getListPokemonsWithDetail(e).pipe(B(t=>{let{count:r,next:u,previous:V,results:y}=t;return this.results=this.results.concat(y),F(y).pipe(S(()=>({count:r,next:u,previous:V,results:this.results})))}),b(()=>this.isHideLoading=!0))}onChangeFilter(e){this.isLoadShowMore=!1,e?this.pokemons$=this.pokemonService.getByNameWithDetail(e).pipe(b(()=>this.isHideLoading=!0)):(this.offset=0,this.getPokemons(0))}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=f({type:o,selectors:[["app-pokemon-list"]],decls:10,vars:6,consts:[["p-title","Pokedex"],[1,"po-row"],[1,"po-xl-12","po-lg-12","po-md-12","po-sm-12","po-mb-2"],[1,"po-xl-3","po-lg-4","po-md-8","po-sm-12","po-mb-1",3,"changeInValue"],[1,"po-font-text-small","po-xl-12","po-lg-12","po-md-12","po-sm-12"],[3,"hidden"],[3,"pokemon"],[1,"po-xl-12","po-lg-12","po-md-12","po-sm-12","po-mb-4"],["p-label","Carregar mais","p-kind","primary",1,"po-offset-md-3","po-offset-lg-4","po-offset-xl-4","po-xl-4","po-lg-4","po-md-6","po-sm-12",3,"p-click","p-disabled","p-loading"],["p-text","Carregando lista de Pok\xE9mons"],[1,"po-font-text-bold"]],template:function(t,r){if(t&1){let u=_();p(0,"po-page-default",0),W(1),P(2,"async"),p(3,"div",1)(4,"po-container",2)(5,"app-search",3),x("changeInValue",function(y){return g(u),k(r.onChangeFilter(y))}),i(),h(6,Le,2,2,"p",4),i(),h(7,Me,5,2)(8,Ie,2,1),i()(),s(9,"po-loading-overlay",5)}if(t&2){n();let u=j(v(2,3,r.pokemons$));n(5),C(u?6:-1),n(),C(u?7:8),n(2),m("hidden",r.isHideLoading)}},dependencies:[R,q,de,ce,oe,ee,pe,ie,ne,te,Pe,xe],encapsulation:2})}}return o})();export{oo as PokemonListComponent};
