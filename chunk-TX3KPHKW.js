import{Aa as Z,C as U,Ca as ee,Da as oe,E as G,N as J,P as K,Ra as te,Sa as ie,ca as l,da as z,l as V,m as j,na as $,o as O,q as W,r as q,ua as X,y as Y}from"./chunk-3H4NJUFE.js";import"./chunk-SBPM3P26.js";import{$b as P,Ac as A,Cb as E,Gc as k,Ha as _,Hc as x,Ic as D,L as v,P as b,Ub as n,ac as S,ca as M,cc as B,dc as Q,ec as p,fc as u,gc as g,ia as s,jb as a,kc as L,pc as R,qc as F,sa as y,sb as w,t as C,ta as h,ud as H,xb as I,yd as T,zc as N}from"./chunk-ROBB4PN5.js";import"./chunk-JKOY2XUY.js";var re="bb473bd526d14ff4d168d83cc33d1f8e79f003f668b5cfc2c6e245b269144b93";var ne=(()=>{class o{constructor(){this.apiUrl="https://economia.awesomeapi.com.br/json/last",this.headers=new H({"x-api-key":re}),this.http=s(T)}getByCurrencyIds(e){return this.http.get(`${this.apiUrl}/${e.join(",")}`,{headers:this.headers})}getCurrencyOptions(){return[{label:"D\xF3lar Americano \u2192 Real Brasileiro",value:"USD-BRL"},{label:"Euro \u2192 Real Brasileiro",value:"EUR-BRL"},{label:"Peso (ARS) \u2192 Real Brasileiro",value:"ARS-BRL"},{label:"Libra esterlina \u2192 Real Brasileiro",value:"GBP-BRL"},{label:"Iene Japon\xEAs \u2192 Real Brasileiro",value:"JPY-BRL"},{label:"Yuan Chin\xEAs \u2192 Real Brasileiro",value:"CNY-BRL"}]}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=M({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var d=class{constructor(i){this.formatter=i}mapFromQuotes(i){let e=[];return Object.keys(i).forEach(r=>{let t=i[r];if(t){let c={name:t.name,ask:this.formatter.format(t.ask),bid:this.formatter.format(t.bid),high:this.formatter.format(t.high),low:this.formatter.format(t.low)};e.push(c)}}),e}};var m=class{format(i){return(typeof i=="string"?parseFloat(i):i).toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:4,maximumFractionDigits:4})}};var pe=["infoModal"];function le(o,i){if(o&1&&(p(0,"po-widget",6),g(1,"po-info",7)(2,"po-info",8)(3,"po-info",9)(4,"po-info",10),u()),o&2){let e=i.$implicit;n("p-title",e.name),a(),n("p-value",e.bid),a(),n("p-value",e.ask),a(),n("p-value",e.high),a(),n("p-value",e.low)}}function ce(o,i){if(o&1&&B(0,le,5,5,"po-widget",6,S),o&2){let e=F();Q(e.currencyInfo)}}var Le=(()=>{class o{constructor(){this.infoModal=w.required("infoModal",{read:l}),this.currencyQuotesServices=s(ne),this.poNotification=s($),this.options=this.currencyQuotesServices.getCurrencyOptions(),this.currencyIds=_([]),this.isHideLoading=!0,this.currencyInfo=[],this.currencyInfoMapper=new d(new m)}getCurrencyQuotes(){(this.currencyIds()?.length??0)>0?(this.isHideLoading=!1,this.currencyQuotesServices.getByCurrencyIds(this.currencyIds()).pipe(C(e=>this.currencyInfoMapper.mapFromQuotes(e)),v(1),b(()=>this.isHideLoading=!0)).subscribe({next:e=>{this.currencyInfo=e,this.infoModal().open()},error:()=>this.poNotification.error("N\xE3o foi poss\xEDvel obter as cota\xE7\xF5es")})):this.poNotification.error("Selecione uma ou mais Moedas para obter as cota\xE7\xF5es")}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=I({type:o,selectors:[["app-currency-quotes"]],viewQuery:function(r,t){r&1&&N(t.infoModal,pe,5,l),r&2&&A()},decls:8,vars:5,consts:[["infoModal",""],["p-title","Cota\xE7\xF5es","p-primary-label","Obter Cota\xE7\xF5es",3,"p-primary-action","p-height"],["name","currencyIds","p-label","Moedas","p-placeholder","Selecione as Moedas","p-placeholder-search","Selecione um ou mais moedas",3,"ngModelChange","ngModel","p-options"],["p-title","Cota\xE7\xF5es"],[1,"po-row"],["p-text","Buscando Cota\xE7\xF5es",3,"hidden"],[1,"po-sm-12","po-md-12","po-lg-6","po-xl-4","po-mb-2",3,"p-title"],["p-label","Bid","p-tooltip","Pre\xE7o de compra, pre\xE7o que o mercado est\xE1 disposto a pagar.",3,"p-value"],["p-label","Ask","p-tooltip","Pre\xE7o de venda, pre\xE7c que o mercado est\xE1 pedindo para vender uma moeda.",3,"p-value"],["p-label","High","p-tooltip","Maior valor alcan\xE7ado no dia",3,"p-value"],["p-label","Low","p-tooltip","Menor valor alcan\xE7ado no dia",3,"p-value"]],template:function(r,t){if(r&1){let c=L();p(0,"po-widget",1),R("p-primary-action",function(){return y(c),h(t.getCurrencyQuotes())}),p(1,"form")(2,"po-multiselect",2),D("ngModelChange",function(f){return y(c),x(t.currencyIds,f)||(t.currencyIds=f),h(f)}),u()(),p(3,"po-modal",3,0)(5,"div",4),E(6,ce,2,0),u()()(),g(7,"po-loading-overlay",5)}r&2&&(n("p-height",220),a(2),k("ngModel",t.currencyIds),n("p-options",t.options),a(4),P(t.currencyInfo.length>0?6:-1),a(),n("hidden",t.isHideLoading))},dependencies:[Z,X,ie,te,Y,q,V,j,W,O,oe,ee,z,l,G,U,K,J],encapsulation:2})}}return o})();export{Le as CurrencyQuotesComponent};
