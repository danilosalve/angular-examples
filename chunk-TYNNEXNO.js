import{Aa as v,Ba as P,Bc as J,Ca as b,D,E as c,Ea as y,H as d,J as E,K as s,P as T,Q as p,Ra as z,Sb as B,Tb as j,V as H,Vb as g,Wb as k,ba as r,da as V,hc as A,ia as a,ic as Q,ja as l,ka as m,ma as x,na as u,oa as h,q as I,qc as U,ra as F,sa as R,ta as M,tc as G,u as f,uc as N,va as q,vc as W,wc as $,x as _,y as w,zc as O}from"./chunk-IHS4TJ4W.js";import{d as S}from"./chunk-4CLCTAJ7.js";var X=(()=>{class i{constructor(){this.person=c.required()}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=p({type:i,selectors:[["app-person-detail"]],inputs:{person:[1,"person"]},decls:9,vars:5,consts:[[1,"po-row"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"po-md-5","po-lg-5"],["p-alt","Foto do Personagem","p-loading","lazy",3,"p-src","p-height"],[1,"po-md-7","po-lg-7"],["p-label","Especie",3,"p-value"],["p-label","Tipo",3,"p-value"],["p-label","Quantidades de Episodios",3,"p-value"]],template:function(o,t){if(o&1&&(a(0,"div",0),v(1),a(2,"po-container",1)(3,"div",2),m(4,"po-image",3),l(),a(5,"div",4),m(6,"po-info",5)(7,"po-info",6)(8,"po-info",7),l()()()),o&2){let n=t.person().episode.length;s(4),r("p-src",t.person().image||"")("p-height",240),s(2),r("p-value",t.person().species),s(),r("p-value",t.person().type||"N\xE3o informado"),s(),r("p-value",n.toString())}},dependencies:[$,W,j,B,N,G],encapsulation:2})}}return i})();var C=(()=>{class i{constructor(){this.apiUrl="https://rickandmortyapi.com/api/character",this.page=d(1),this.persons=[],this.getPersons=z({request:this.page,loader:t=>S(this,[t],function*({request:e,abortSignal:o}){try{let n=yield(yield fetch(`${this.apiUrl}/?page=${e}`,{signal:o})).json();return this.persons.length>0?this.persons=this.persons.concat(n.results):this.persons=n.results,n=this.persons,n}catch(n){this.handleError(n)}})})}getColumns(){return[{property:"id",label:"Id",sortable:!0,type:"number"},{property:"name",label:"Nome",sortable:!0,type:"string"},{property:"status",label:"Status",sortable:!0,type:"label",visible:this.IsColumnVisible(),labels:[{value:"Alive",color:"color-10",label:"Vivo"},{value:"Dead",color:"color-02",label:"Morto"},{value:"unknown",color:"color-07",label:"Desconhecido"}]},{property:"species",label:"Esp\xE9cie",sortable:!0,type:"string",visible:this.IsColumnVisible()},{property:"gender",label:"G\xEAnero",sortable:!0,type:"label",visible:this.IsColumnVisible(),labels:[{value:"Female",color:"color-06",label:"Feminino"},{value:"Male",color:"color-02",label:"Masculino"},{value:"Genderless",color:"color-08",label:"Sem g\xEAnero"},{value:"unknown",color:"color-07",label:"Desconhecido"}]},{property:"location.name",label:"Localiza\xE7\xE3o",sortable:!0,type:"string",visible:this.IsColumnVisible()},{property:"type",label:"Tipo",sortable:!0,type:"string",visible:!1}]}updatePage(e){this.page.set(e)}handleError(e){throw e}IsColumnVisible(){return window.innerWidth>480}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var oe=()=>["name"],Y=(()=>{class i{constructor(){this.persons=c.required(),this.isLoading=c(!1),this.viewDetailPerson=D(),this.loadMorePersons=D(),this.personsService=f(C),this.columns=this.personsService.getColumns(),this.height=400,this.filterType=A.contains,this.actions=[{label:"Compartilhar",action:this.viewDetail.bind(this),icon:"an an-share",disabled:!0},{label:"Detalhes",action:this.viewDetail.bind(this),icon:"an an-arrow-square-in"}]}onResize(){setTimeout(()=>this.setHeight(),200)}loadPersons(){this.loadMorePersons.emit()}viewDetail(e){this.viewDetailPerson.emit(e)}ngAfterViewInit(){this.onResize()}setHeight(){let e=[];e.push(this.getElementHeightById(".po-page-header")),e.push(this.getElementHeightById(".po-row po-table-footer-show-more ng-star-inserted")),this.height=this.calculateHeight(e)-145}getElementHeightById(e){let o=document.querySelector(e);return o?o.clientHeight:0}calculateHeight(e){return e.reduce((o,t)=>o-t,window.innerHeight)}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=p({type:i,selectors:[["app-persons-list"]],hostBindings:function(o,t){o&1&&u("resize",function(){return t.onResize()},!1,E)},inputs:{persons:[1,"persons"],isLoading:[1,"isLoading"]},outputs:{viewDetailPerson:"viewDetailPerson",loadMorePersons:"loadMorePersons"},decls:1,vars:12,consts:[["p-container","shadow",3,"p-show-more","p-items","p-loading","p-height","p-columns","p-draggable","p-sort","p-filtered-columns","p-hide-table-search","p-filter-type","p-actions","p-actions-right"]],template:function(o,t){o&1&&(a(0,"po-table",0),u("p-show-more",function(){return t.loadPersons()}),l()),o&2&&r("p-items",t.persons())("p-loading",t.isLoading())("p-height",t.height)("p-columns",t.columns)("p-draggable",!0)("p-sort",!0)("p-filtered-columns",y(11,oe))("p-hide-table-search",!1)("p-filter-type",t.filterType)("p-actions",t.actions)("p-actions-right",!0)},dependencies:[U,Q],encapsulation:2})}}return i})();var te=()=>[];function ie(i,Z){if(i&1&&(a(0,"p"),M(1,"Ops, ocorreu erro ao tentar listar os Usu\xE1rios :("),l(),M(2)),i&2){h();let e=b(3);s(2),q(" ",e," ")}}function ne(i,Z){if(i&1){let e=x();a(0,"app-persons-list",4),u("loadMorePersons",function(){_(e);let t=h();return w(t.loadPersons())})("viewDetailPerson",function(t){_(e);let n=h();return w(n.viewDetail(t))}),l()}if(i&2){h();let e=b(1),o=b(2);r("persons",e)("isLoading",o)}}var Me=(()=>{class i{constructor(){this.modal=T.required(g),this.page=d(1),this.personsService=f(C),this.personsResource=this.personsService.getPersons,this.person=d(void 0)}loadPersons(){this.page.update(e=>e+1),this.personsService.updatePage(this.page())}restartPersons(){this.personsResource.reload()}viewDetail(e){this.person.set(e),this.modal().open()}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=p({type:i,selectors:[["app-persons"]],viewQuery:function(o,t){o&1&&F(t.modal,g,5),o&2&&R()},decls:8,vars:7,consts:[["p-title","Rick & Morty | Personagens","p-subtitle","Exemplo de uso da API resource"],[3,"persons","isLoading"],["p-size","lg",3,"p-title"],[3,"person"],[3,"loadMorePersons","viewDetailPerson","persons","isLoading"]],template:function(o,t){if(o&1&&(a(0,"po-page-default",0),v(1)(2)(3),H(4,ie,3,1)(5,ne,1,2,"app-persons-list",1),a(6,"po-modal",2),m(7,"app-person-detail",3),l()()),o&2){let n;s(),P(t.personsResource.value()||y(6,te)),s(),P(t.personsResource.isLoading()),s();let ee=P(t.personsResource.error());s(),V(ee?4:5),s(2),r("p-title",((n=t.person())==null?null:n.name)||"Detalhes"),s(),r("person",t.person())}},dependencies:[J,O,k,g,Y,X],encapsulation:2})}}return i})();export{Me as PersonsComponent};
