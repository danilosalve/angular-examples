import{A as re,B as ae,C as pe,Ca as ge,E as le,Ea as ye,Fa as ve,N as se,P as ce,R as ue,S as me,Ua as M,Va as _,da as g,ea as de,k as Z,l as ee,n as oe,oa as fe,p as te,q as ie,va as he,x as ne}from"./chunk-HCPK7XEO.js";import"./chunk-MDUUVM26.js";import{$b as l,Bb as Q,Bd as $,Cc as b,Dc as U,Fd as X,Gc as G,Hc as J,Ic as K,L as B,Mb as k,P as F,Qb as T,Ub as v,Vb as C,Wb as A,Yb as q,Zb as V,_b as r,ac as s,bc as c,da as L,db as p,dd as m,ia as f,ic as W,kd as d,ld as z,nc as O,oa as D,oc as h,pa as E,t as N,vb as u,vc as j,wc as H,xa as R,xc as Y}from"./chunk-QL522RBE.js";import"./chunk-RTRJ3KFH.js";var Ce="bb473bd526d14ff4d168d83cc33d1f8e79f003f668b5cfc2c6e245b269144b93";var be=(()=>{let e=class e{constructor(){this.apiUrl="https://economia.awesomeapi.com.br/json/last",this.params=new $().set("token",Ce),this.http=f(X)}getByCurrencyIds(n){return this.http.get(`${this.apiUrl}/${n.join(",")}`,{params:this.params})}getCurrencyOptions(){return[{label:"D\xF3lar Americano \u2192 Real Brasileiro",value:"USD-BRL"},{label:"Euro \u2192 Real Brasileiro",value:"EUR-BRL"},{label:"Peso (ARS) \u2192 Real Brasileiro",value:"ARS-BRL"},{label:"Libra esterlina \u2192 Real Brasileiro",value:"GBP-BRL"},{label:"Iene Japon\xEAs \u2192 Real Brasileiro",value:"JPY-BRL"},{label:"Yuan Chin\xEAs \u2192 Real Brasileiro",value:"CNY-BRL"}]}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var P=class{constructor(e){this.formatter=e}mapFromQuotes(e){let a=[];return Object.keys(e).forEach(n=>{let t=e[n];if(t){let i={name:t.name,ask:this.formatter.format(t.ask),bid:this.formatter.format(t.bid),high:this.formatter.format(t.high),low:this.formatter.format(t.low)};a.push(i)}}),a}};var w=class{format(e){return(typeof e=="string"?parseFloat(e):e).toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:4,maximumFractionDigits:4})}};var x=(()=>{let e=class e{constructor(){this.label=d.required(),this.help=d(""),this.value=d.required()}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u({type:e,selectors:[["app-currency-info"]],inputs:{label:[1,"label"],help:[1,"help"],value:[1,"value"]},decls:9,vars:6,consts:[["appElement",""],["target",""],[1,"po-row"],[1,"po-sm-11","po-md-11","po-lg-11","po-xl-11",3,"p-label","p-value"],[1,"po-sm-1","po-md-1","po-lg-1","po-xl-1"],["p-icon","an an-question",1,"po-clickable",3,"p-tooltip"],["p-trigger","click",3,"p-target","p-hide-arrow"],[1,"po-font-text-small"]],template:function(t,i){if(t&1&&(l(0,"div",2),c(1,"po-info",3),l(2,"div",4,0),c(4,"po-icon",5,1),s()(),l(6,"po-popover",6)(7,"p",7),b(8),s()()),t&2){let y=Y(3);p(),r("p-label",i.label())("p-value",i.value()),p(3),r("p-tooltip",i.help()),p(2),r("p-target",y)("p-hide-arrow",!0),p(2),U(i.help())}},dependencies:[ae,re,ve,ye,me,ue,le,pe],encapsulation:2,changeDetection:0});let o=e;return o})();var we=()=>[x];function Ie(o,e){if(o&1&&c(0,"app-currency-info",3)(1,"app-currency-info",4)(2,"app-currency-info",5),o&2){let a=h(2);r("value",a.bid()),p(),r("value",a.high()),p(),r("value",a.low())}}function De(o,e){o&1&&(l(0,"p",6,0),b(2,"Ver mais Informa\xE7\xF5es"),s())}function Ee(o,e){if(o&1&&(l(0,"po-widget",1),c(1,"app-currency-info",2),Q(2,Ie,3,3)(3,De,3,0),k(4,2,we,null,3),T(0,-1),s()),o&2){let a=h();r("p-title",a.name()),p(),r("value",a.ask())}}var _e=(()=>{let e=class e{constructor(){this.info=d.required(),this.ask=m(()=>this.info().ask),this.bid=m(()=>this.info().bid),this.low=m(()=>this.info().low),this.high=m(()=>this.info().high),this.name=m(()=>this.info().name)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u({type:e,selectors:[["app-currency"]],inputs:{info:[1,"info"]},decls:1,vars:1,consts:[["complement",""],[1,"po-sm-12","po-md-12","po-lg-6","po-xl-4","po-mb-2",3,"p-title"],["label","Ask","help","Pre\xE7o de venda, pre\xE7o que o mercado est\xE1 pedindo para vender uma moeda",3,"value"],["label","Bid","help","Pre\xE7o de compra, pre\xE7o que o mercado est\xE1 disposto a pagar",3,"value"],["label","High","help","Maior valor alcan\xE7ado no dia",3,"value"],["label","Low","help","Menor valor alcan\xE7ado no dia",3,"value"],[1,"po-font-text-bold"]],template:function(t,i){t&1&&v(0,Ee,6,2,"po-widget",1),t&2&&C(i.info()?0:-1)},dependencies:[_,M,x],encapsulation:2,changeDetection:0});let o=e;return o})();var Se=["infoModal"];function xe(o,e){if(o&1&&c(0,"app-currency",5),o&2){let a=e.$implicit;r("info",a)}}function Ne(o,e){if(o&1&&q(0,xe,1,1,"app-currency",5,A),o&2){let a=h();V(a.currencyInfo)}}var po=(()=>{let e=class e{constructor(){this.infoModal=z.required("infoModal",{read:g}),this.currencyQuotesServices=f(be),this.poNotification=f(fe),this.options=this.currencyQuotesServices.getCurrencyOptions(),this.currencyIds=R([]),this.isHideLoading=!0,this.currencyInfo=[],this.currencyInfoMapper=new P(new w)}getCurrencyQuotes(){(this.currencyIds()?.length??0)>0?(this.isHideLoading=!1,this.currencyQuotesServices.getByCurrencyIds(this.currencyIds()).pipe(N(n=>this.currencyInfoMapper.mapFromQuotes(n)),B(1),F(()=>this.isHideLoading=!0)).subscribe({next:n=>{this.currencyInfo=n,this.infoModal().open()},error:()=>this.poNotification.error("N\xE3o foi poss\xEDvel obter as cota\xE7\xF5es")})):this.poNotification.error("Selecione uma ou mais Moedas para obter as cota\xE7\xF5es")}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u({type:e,selectors:[["app-currency-quotes"]],viewQuery:function(t,i){t&1&&j(i.infoModal,Se,5,g),t&2&&H()},decls:7,vars:7,consts:[["infoModal",""],["p-title","Cota\xE7\xF5es","p-primary-label","Obter Cota\xE7\xF5es",3,"p-primary-action","p-height"],["name","currencyIds","p-placeholder","Selecione uma ou mais moedas",3,"ngModelChange","ngModel","p-options","p-hide-search","p-hide-select-all"],["p-title","Cota\xE7\xF5es"],["p-text","Buscando Cota\xE7\xF5es",3,"hidden"],[3,"info"]],template:function(t,i){if(t&1){let y=W();l(0,"po-widget",1),O("p-primary-action",function(){return D(y),E(i.getCurrencyQuotes())}),l(1,"form")(2,"po-multiselect",2),K("ngModelChange",function(I){return D(y),J(i.currencyIds,I)||(i.currencyIds=I),E(I)}),s()(),l(3,"po-modal",3,0),v(5,Ne,2,0),s()(),c(6,"po-loading-overlay",4)}t&2&&(r("p-height",220),p(2),G("ngModel",i.currencyIds),r("p-options",i.options)("p-hide-search",!0)("p-hide-select-all",!0),p(3),C(i.currencyInfo.length>0?5:-1),p(),r("hidden",i.isHideLoading))},dependencies:[ge,he,_,M,de,g,ce,se,_e,ne,ie,Z,ee,te,oe],encapsulation:2});let o=e;return o})();export{po as CurrencyQuotesComponent};
