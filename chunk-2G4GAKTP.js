import{A as w,B as k,C as W,Ca as X,D as B,E as f,Ea as Y,F as H,P as E,aa as Q,ba as U,j as P,k as b,la as F,m as _,o as M,p as N,ra as T,ta as J,ua as K,w as L}from"./chunk-CFTYIETL.js";import"./chunk-YQH3U43A.js";import{B as D,Cb as u,Cc as v,Dc as y,Ec as S,Q as h,Ub as l,Vd as G,W as R,_b as d,da as j,dc as a,ec as p,fc as m,ib as i,ja as r,lc as g,mc as z,rb as O,sb as C,vc as V,wb as c,wc as $}from"./chunk-EQ2ZZIGX.js";import"./chunk-4CLCTAJ7.js";var q=(()=>{class e{constructor(){this.http=r(G),this.apiUrl="https://swapi.py4e.com/api/people",this.cacheTimer$=D(5e3),this.currentSearch=""}findPeopleWithCache(o){return this.compareSearchValue(o),this.data$||(this.data$=this.http.get(`${this.apiUrl}/?search=${o}&page=1`).pipe(R({bufferSize:1,refCount:!0,windowTime:5e3})),this.cacheTimer$.subscribe(()=>this.clearObservable())),this.data$}compareSearchValue(o){this.currentSearch!==o&&(this.clearObservable(),this.currentSearch=o)}clearObservable(){this.data$=void 0}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ne(e,I){e&1&&m(0,"po-loading-overlay")}function ie(e,I){if(e&1&&m(0,"po-info",2)(1,"po-info",3)(2,"po-info",4)(3,"po-info",5),e&2){let o=z();l("p-value",o.people.name),i(),l("p-value",o.people.gender),i(),l("p-value",o.people.height),i(),l("p-value",o.people.mass)}}var ee=(()=>{class e{constructor(){this.isLoading=!1,this.name=C("Luke"),this.modal=O.required(f),this.peopleStarWarsService=r(q),this.poNotification=r(E)}onClickSearch(){this.isLoading=!0,this.peopleStarWarsService.findPeopleWithCache(this.name()).pipe(h(()=>this.isLoading=!1)).subscribe({next:o=>this.onHandleResponse(o),error:()=>this.poNotification.success("Falha ao tentar buscar pessoa")})}onHandleResponse(o){if(o.results.length){this.people=o.results[0];let t={message:this.people?.name||"",actionLabel:"Detalhes",supportMessage:"Pesquisa conclu\xEDda com sucesso",action:()=>this.modal().open()};this.poNotification.success(t)}else this.poNotification.warning("Nenhum resultado foi encontrado para a pesquisa")}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=c({type:e,selectors:[["app-component-b"]],viewQuery:function(t,n){t&1&&V(n.modal,f,5),t&2&&$()},inputs:{name:[1,"name"]},outputs:{name:"nameChange"},decls:6,vars:4,consts:[["name","name","p-label","Nome","p-placeholder","Ex: Luke","p-help","Informe o nome de um personagem do Star Wars","p-required","","p-clean","",3,"ngModelChange","ngModel","p-no-autocomplete"],["p-label","Pesquisar","p-kind","primary",3,"p-click"],["p-label","Nome",3,"p-value"],["p-label","Genero",3,"p-value"],["p-label","Peso (massa)",3,"p-value"],["p-label","Altura",3,"p-value"]],template:function(t,n){t&1&&(a(0,"form")(1,"po-input",0),S("ngModelChange",function(s){return y(n.name,s)||(n.name=s),s}),p(),a(2,"po-button",1),g("p-click",function(){return n.onClickSearch()}),p()(),u(3,ne,1,0,"po-loading-overlay"),a(4,"po-modal"),u(5,ie,4,4),p()),t&2&&(i(),v("ngModel",n.name),l("p-no-autocomplete",!0),i(2),d(n.isLoading?3:-1),i(2),d(n.people?5:-1))},dependencies:[T,F,B,W,k,w,H,f,L,N,P,b,M,_,K,J],encapsulation:2})}}return e})();function ae(e,I){e&1&&m(0,"po-loading-overlay")}var oe=(()=>{class e{constructor(){this.name=C("Luke"),this.isLoading=!1,this.peopleStarWarsService=r(q),this.poNotification=r(E)}onClickSearch(){this.isLoading=!0,this.peopleStarWarsService.findPeopleWithCache(this.name()).pipe(h(()=>this.isLoading=!1)).subscribe({next:()=>this.poNotification.success("Sucesso"),error:()=>this.poNotification.success("Falha ao tentar buscar pessoa")})}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=c({type:e,selectors:[["app-component-a"]],inputs:{name:[1,"name"]},outputs:{name:"nameChange"},decls:4,vars:3,consts:[["name","name","p-label","Nome","p-placeholder","Ex: Luke","p-help","Informe o nome de um personagem do Star Wars","p-required","","p-clean","",3,"ngModelChange","ngModel","p-no-autocomplete"],["p-label","Pesquisar","p-kind","primary",3,"p-click"]],template:function(t,n){t&1&&(a(0,"form")(1,"po-input",0),S("ngModelChange",function(s){return y(n.name,s)||(n.name=s),s}),p(),a(2,"po-button",1),g("p-click",function(){return n.onClickSearch()}),p()(),u(3,ae,1,0,"po-loading-overlay")),t&2&&(i(),v("ngModel",n.name),l("p-no-autocomplete",!0),i(2),d(n.isLoading?3:-1))},dependencies:[T,F,B,W,k,w,L,N,P,b,M,_],encapsulation:2})}}return e})();var ke=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=c({type:e,selectors:[["app-replay"]],decls:6,vars:0,consts:[["p-title","ShareReplay","p-subtitle","Exemplo de uso para Utiliza\xE7\xE3o de Cache em Requisi\xE7\xF5es"],["p-title","Cache de 5s",1,"po-row"],["p-title","Componente A",1,"po-sm-12","po-md-12","po-lg-6","po-xl-6","po-mb-2"],["p-title","Componente B",1,"po-sm-12","po-md-12","po-lg-6","po-xl-6","po-mb-2"]],template:function(t,n){t&1&&(a(0,"po-page-default",0)(1,"po-container",1)(2,"po-container",2),m(3,"app-component-a"),p(),a(4,"po-container",3),m(5,"app-component-b"),p()()())},dependencies:[oe,ee,Y,X,U,Q],encapsulation:2})}}return e})();export{ke as ReplayComponent};
