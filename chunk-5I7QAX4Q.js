import{b as w}from"./chunk-TDWIGFC6.js";import{$ as a,$a as z,Aa as B,Ac as pt,Bb as H,Bc as at,D as u,F as h,Fa as Q,Gb as N,Ha as U,I as n,Ib as G,Mb as J,N as E,Nb as K,O as m,Ob as X,Pb as Y,Sb as Z,T as _,Tb as tt,Wa as W,aa as q,ba as f,da as D,ea as y,fa as x,ga as r,ha as p,ia as c,ic as C,ka as F,la as $,ma as g,mc as et,n as M,oc as ot,pa as V,pc as it,q as R,qa as A,ra as l,sa as O,sc as nt,ta as j,u as P,uc as rt,x as b,y as T,ya as S,za as k}from"./chunk-2ZMTMRUR.js";import"./chunk-4CLCTAJ7.js";function lt(t,s){if(t&1&&c(0,"i"),t&2){let e=s.$index,o=g();q(o.getStarClass(e+1))}}function ut(t,s){if(t&1&&(r(0,"p",1),l(1),p()),t&2){let e=g();n(),j("Avalia\xE7\xF5es: (",e.count(),")")}}var st=(()=>{class t{constructor(){this.rating=u.required(),this.max=u.required(),this.count=u(0),this.stars=[]}ngOnInit(){for(let e=0;e<this.max();e++)this.stars.push(e)}getStarClass(e){return e<=this.rating()?"an-fill an-star":e-1+.5<this.rating()?"an-fill an-star-half":"an an-star"}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=m({type:t,selectors:[["app-rating"]],inputs:{rating:[1,"rating"],max:[1,"max"],count:[1,"count"]},decls:3,vars:1,consts:[[3,"class"],[1,"po-font-text-smaller"]],template:function(o,i){o&1&&(y(0,lt,1,2,"i",0,D),_(2,ut,2,1,"p",1)),o&2&&(x(i.stars),n(2),f(i.count()?2:-1))},encapsulation:2})}}return t})();var ct=(()=>{class t{constructor(){this.product=u.required(),this.height=250}ngOnInit(){this.isSmartPhone()&&(this.height=420)}isSmartPhone(){return window.innerWidth<576}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=m({type:t,selectors:[["app-product-card"]],inputs:{product:[1,"product"]},decls:12,vars:11,consts:[[1,"po-sm-12","po-md-12","po-lg-6","po-xl-4","po-mb-2",3,"p-height"],[1,"po-row"],[1,"po-md-5","po-lg-5"],["p-size","xl","p-loading","lazy",3,"p-src"],[1,"po-md-7","po-lg-7"],[1,"po-font-text-large-bold","po-mb-1"],[1,"po-mb-1",3,"p-value"],["p-label","Pre\xE7o",3,"p-value"],[3,"rating","max","count"]],template:function(o,i){if(o&1&&(r(0,"po-widget",0),S(1),Q(2,"currency"),r(3,"div",1)(4,"div",2),c(5,"po-avatar",3),p(),r(6,"div",4)(7,"p",5),l(8),p(),c(9,"po-tag",6)(10,"po-info",7)(11,"app-rating",8),p()()()),o&2){let d;a("p-height",i.height);let v=(d=U(2,8,i.product().price,"BRL"))!==null&&d!==void 0?d:0;n(5),a("p-src",i.product().image),n(3),O(i.product().title),n(),a("p-value",i.product().category),n(),a("p-value",v.toString()),n(),a("rating",i.product().rating.rate)("max",5)("count",i.product().rating.count)}},dependencies:[at,pt,it,ot,G,N,K,J,st,W],encapsulation:2,changeDetection:0})}}return t})();var dt=(()=>{class t{constructor(){this.apiUrl="https://fakestoreapi.com/products",this.productId=h(0),this.limit=h(10),this.http=P(z),this.getProducts=w({request:this.limit,loader:({request:e})=>this.http.get(`${this.apiUrl}?limit=${e}`).pipe(M(1))}),this.getProductById=w({request:this.productId,loader:({request:e})=>this.http.get(`${this.apiUrl}/${e}`).pipe(M(1))})}updateProduct(e){this.productId.set(e)}updateLimit(e){this.limit.set(e)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ht=(t,s)=>s.id;function ft(t,s){if(t&1&&c(0,"app-product-card",6),t&2){let e=s.$implicit;a("product",e)}}function gt(t,s){if(t&1&&y(0,ft,1,1,"app-product-card",6,ht),t&2){g();let e=B(1);x(e)}}function Ct(t,s){t&1&&(r(0,"p"),l(1,"Nenhum produto encontrado."),p())}function vt(t,s){t&1&&(r(0,"p",4),l(1,"Ops, ocorreu erro ao tentar listar os Produtos :("),p())}var Bt=(()=>{class t{constructor(){this.limit=h(10),this.poSelect=E.required(C),this.productsService=P(dt),this.productsResource=this.productsService.getProducts,this.optionsLimit=[{label:"10",value:10},{label:"15",value:15},{label:"30",value:30}]}ngOnInit(){this.poSelect().modelValue=this.limit()}onChangeLimit(e){this.limit.set(e),this.productsService.updateLimit(this.limit())}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=m({type:t,selectors:[["app-products"]],viewQuery:function(o,i){o&1&&V(i.poSelect,C,5),o&2&&A()},decls:12,vars:5,consts:[["p-title","Produtos","p-subtitle","Exemplo de uso da API RxResource"],[1,"po-row"],["p-label","Itens por p\xE1gina","name","limit",3,"p-change","p-options"],[1,"po-mb-5"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mb-2"],["p-text","Carregando produtos",3,"hidden"],[3,"product"]],template:function(o,i){if(o&1){let d=F();r(0,"po-page-default",0),S(1)(2)(3)(4),r(5,"div",1)(6,"po-select",2),$("p-change",function(I){return b(d),T(i.onChangeLimit(I))}),p(),r(7,"po-container",3),_(8,gt,2,0)(9,Ct,2,0,"p")(10,vt,2,0,"p",4),c(11,"po-loading-overlay",5),p()()()}if(o&2){n(),k(i.productsResource.value());let d=i.productsResource.hasValue(),v=i.productsResource.isLoading(),I=i.productsResource.error();n(5),a("p-options",i.optionsLimit),n(2),f(d?8:9),n(2),f(I?10:-1),n(),a("hidden",!v)}},dependencies:[rt,nt,Y,X,tt,Z,et,C,ct,H],encapsulation:2})}}return t})();export{Bt as ProductsComponent};
