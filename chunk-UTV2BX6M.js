import{b as X}from"./chunk-M6MFOQKN.js";import{a as Y}from"./chunk-PWD5EPYB.js";import{D as x,Ga as K,Ha as O,I as U,K as G,W as H,X as Q,oa as z,q as R,r as T,sa as A,t as D,v as j,w as L,xa as J}from"./chunk-LUFRNRS2.js";import{$c as S,Ac as N,Bc as E,Cc as W,Fd as k,Hd as B,Ia as w,Mc as C,Oc as _,Sb as f,Sd as F,_c as m,bc as s,ca as y,cc as l,dc as P,hb as r,hc as I,ia as h,jc as g,s as V,sa as d,ta as u,vb as b,wc as p,yc as v,zb as q,zc as M}from"./chunk-FC34NM5Q.js";import"./chunk-4CLCTAJ7.js";var Z=(()=>{class i{constructor(){this.vehicleUrl="https://swapi.py4e.com/api/vehicles",this.http=h(F),this.selectedVehicle=w(void 0),this.quantity=S({source:this.selectedVehicle,computation:e=>e?e.passengers==0?e.crew:e.passengers:0}),this.costInCredits=S({source:this.selectedVehicle,computation:e=>e?isNaN(e.cost_in_credits)?0:e.cost_in_credits:0}),this.total=m(()=>(isNaN(this.selectedVehicle()?.cost_in_credits||0)?0:this.selectedVehicle()?.cost_in_credits??0)*this.quantity()),this.color=m(()=>this.total()===0?"color-07":this.total()>5e4?"color-10":"color-02"),this.vehiclesResource=X({loader:()=>this.http.get(this.vehicleUrl).pipe(V(e=>e.results))}),this.vehicles=m(()=>this.vehiclesResource.value()??[]),this.options=m(()=>this.vehiclesResource.value()?.map(e=>({value:e.name,label:`${e.name} - ${e.passengers}`}))??[])}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275prov=y({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ge=(()=>{class i extends Y{constructor(){super("signals/samples"),this.vehicleService=h(Z),this.color=this.vehicleService.color,this.quantity=this.vehicleService.quantity,this.selectedVehicle=this.vehicleService.selectedVehicle,this.total=this.vehicleService.total,this.vehicles=this.vehicleService.vehicles,this.options=this.vehicleService.options,this.costInCredits=this.vehicleService.costInCredits}onVehicleSelected(e){let o=this.vehicles().find(t=>t.name===e);this.selectedVehicle.set(o)}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=b({type:i,selectors:[["app-star-wars-vehicle"]],features:[q],decls:18,vars:19,consts:[["f","ngForm"],["p-title","Veiculos","p-subtitle","Exemplo Linked Signals",3,"p-back"],["name","options","p-label","Veiculo","p-placeholder","Selecione um veiculo",3,"p-change","p-options","p-required","p-show-required","p-remove-initial-filter"],["p-label","Quantidade","name","quantity","p-required","",3,"ngModelChange","ngModel","p-min","p-show-required"],["p-title","Resumo da venda"],[1,"po-font-text-large"],[3,"p-color"]],template:function(o,t){if(o&1){let n=I();s(0,"po-page-detail",1),g("p-back",function(){return d(n),u(t.onBack())}),s(1,"po-container")(2,"form",null,0)(4,"po-combo",2),g("p-change",function(c){return d(n),u(t.onVehicleSelected(c))}),l(),s(5,"po-number",3),W("ngModelChange",function(c){return d(n),E(t.quantity,c)||(t.quantity=c),u(c)}),l()()(),s(6,"po-container",4)(7,"p",5),p(8),l(),s(9,"p",5),p(10),l(),s(11,"p",5),p(12),C(13,"currency"),l(),s(14,"p",5),p(15),C(16,"currency"),l(),P(17,"po-tag",6),l()()}if(o&2){let n,a;r(4),f("p-options",t.options())("p-required",!0)("p-show-required",!0)("p-remove-initial-filter",!0),r(),N("ngModel",t.quantity),f("p-min",1)("p-show-required",!0),r(3),M(" Veiculo Selecionado: ",(n=t.selectedVehicle())==null?null:n.name," - ",(n=t.selectedVehicle())==null?null:n.passengers," "),r(2),v("Capacidade de passageiros: ",(a=t.selectedVehicle())==null?null:a.passengers,""),r(2),v("Pre\xE7o do veiculo: ",_(13,13,t.costInCredits(),"BRL"),""),r(3),v("Total: ",_(16,16,t.total(),"BRL"),""),r(2),f("p-color",t.color())}},dependencies:[O,K,Q,H,J,z,A,U,G,x,L,R,T,j,D,B,k],encapsulation:2})}}return i})();export{ge as StarWarsVehicleComponent};
