import{b as fe}from"./chunk-M6MFOQKN.js";import{a as ge}from"./chunk-GDNKVTJS.js";import{Aa as se,Ba as ce,Ca as le,D as G,Fa as de,Ha as me,I as J,K as X,Na as ue,O as Y,Oa as he,Q as Z,W as ee,X as te,ja as oe,ka as ie,ta as y,ua as re,va as ne,xa as pe,za as ae}from"./chunk-LUFRNRS2.js";import{$b as w,Bb as x,Dc as _,Ea as f,Ec as W,Fa as q,Fc as H,Fd as U,Ia as d,Ic as K,Mc as E,Oc as M,Sb as a,Sd as z,V as k,Vb as j,Yb as v,_b as A,_c as N,ac as L,bc as n,ca as Q,cc as p,dc as m,hb as r,hc as B,ia as h,jc as V,kc as P,qb as S,sa as F,ta as D,tc as I,uc as b,vb as g,wc as c,xc as O,yb as $,yc as R}from"./chunk-FC34NM5Q.js";import"./chunk-4CLCTAJ7.js";function Se(e,s){if(e&1&&m(0,"i"),e&2){let t=s.$index,i=P();j(i.getStarClass(t+1))}}function xe(e,s){if(e&1&&(n(0,"p",1),c(1),p()),e&2){let t=P();r(),R("Avalia\xE7\xF5es: (",t.count(),")")}}var Ce=(()=>{class e{constructor(){this.rating=f.required(),this.max=f.required(),this.count=f(0),this.stars=[]}ngOnInit(){for(let t=0;t<this.max();t++)this.stars.push(t)}getStarClass(t){return t<=this.rating()?"an-fill an-star":t-1+.5<this.rating()?"an-fill an-star-half":"an an-star"}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=g({type:e,selectors:[["app-rating"]],inputs:{rating:[1,"rating"],max:[1,"max"],count:[1,"count"]},decls:3,vars:1,consts:[[3,"class"],[1,"po-font-text-smaller"]],template:function(i,o){i&1&&(w(0,Se,1,2,"i",0,A),x(2,xe,2,1,"p",1)),i&2&&(L(o.stars),r(2),v(o.count()?2:-1))},encapsulation:2})}}return e})();var Le=["poImage"],ve=(()=>{class e{constructor(){this.poImageRef=S.required("poImage",{read:q}),this.product=f.required(),this.height=d(280),this.image=d(40),this.imageHeight=N(()=>this.height()-this.image()),this.device=h(ge)}ngOnInit(){this.device.isSmartPhone()&&(this.height.set(610),this.image.set(300))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=g({type:e,selectors:[["app-product-card"]],viewQuery:function(i,o){i&1&&I(o.poImageRef,Le,5,q),i&2&&b()},inputs:{product:[1,"product"]},decls:15,vars:16,consts:[["poImage",""],[1,"po-sm-12","po-md-12","po-lg-6","po-xl-4","po-mb-2",3,"p-height"],[1,"po-row"],[1,"po-md-5","po-lg-5"],["p-loading","lazy",3,"p-src","p-alt","p-height"],["p-trigger","click","p-title","Descri\xE7\xE3o","p-position","bottom",3,"p-target","p-hide-arrow"],[1,"po-md-7","po-lg-7"],[1,"po-font-text-large-bold","po-mb-1"],[1,"po-mb-1",3,"p-value"],["p-label","Pre\xE7o",3,"p-value"],[3,"rating","max","count"]],template:function(i,o){if(i&1&&(n(0,"po-widget",1),_(1),E(2,"currency"),n(3,"div",2)(4,"div",3),m(5,"po-image",4,0),n(7,"po-popover",5),c(8),p()(),n(9,"div",6)(10,"p",7),c(11),p(),m(12,"po-tag",8)(13,"po-info",9)(14,"app-rating",10),p()()()),i&2){let l;a("p-height",o.height());let u=(l=M(2,13,o.product().price,"BRL"))!==null&&l!==void 0?l:0;r(5),a("p-src",o.product().image)("p-alt",o.product().description)("p-height",o.imageHeight()),r(2),a("p-target",o.poImageRef())("p-hide-arrow",!0),r(),R(" ",o.product().description," "),r(3),O(o.product().title),r(),a("p-value",o.product().category),r(),a("p-value",u.toString()),r(),a("rating",o.product().rating.rate)("max",5)("count",o.product().rating.count)}},dependencies:[he,ue,se,ae,X,J,Ce,U,le,ce,ie,oe],encapsulation:2,changeDetection:0})}}return e})();var Pe=(()=>{class e{constructor(){this.apiUrl="https://fakestoreapi.com/products",this.limit=d(10),this.http=h(z),this.getProducts=fe({request:this.limit,loader:({request:t})=>this.http.get(`${this.apiUrl}?limit=${t}`).pipe(k(1))})}updateLimit(t){this.limit.set(t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var _e=(()=>{class e{transform(t,i){return i?t.filter(o=>o.title.toLocaleLowerCase().startsWith(i.toLocaleLowerCase())||o.category.toLocaleLowerCase().startsWith(i.toLocaleLowerCase())):t}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275pipe=$({name:"productsSearch",type:e,pure:!0})}}return e})();var Ie=(e,s)=>s.id,be=()=>[];function Re(e,s){if(e&1&&m(0,"app-product-card",7),e&2){let t=s.$implicit;a("product",t)}}function Ee(e,s){e&1&&(n(0,"p"),c(1,"Nenhum produto encontrado."),p())}function Me(e,s){if(e&1&&w(0,Re,1,1,"app-product-card",7,Ie,!1,Ee,2,0,"p"),e&2){P();let t=H(1);L(t)}}function Te(e,s){e&1&&(n(0,"p"),c(1,"Nenhum produto encontrado."),p())}function Fe(e,s){e&1&&(n(0,"p",5),c(1,"Ops, ocorreu erro ao tentar listar os Produtos :("),p())}var rt=(()=>{class e{constructor(){this.filter=d(""),this.filterKeys=["title","category"],this.limit=d(10),this.poSelect=S.required(y),this.productsService=h(Pe),this.productsResource=this.productsService.getProducts,this.optionsLimit=[{label:"10",value:10},{label:"15",value:15},{label:"30",value:30}]}ngAfterContentInit(){this.poSelect().modelValue=this.limit()}onChangeLimit(t){this.limit.set(t),this.productsService.updateLimit(this.limit())}onChangeFilter(t){this.filter.set(t.value)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=g({type:e,selectors:[["app-products"]],viewQuery:function(i,o){i&1&&I(o.poSelect,y,5),i&2&&b()},decls:14,vars:13,consts:[["p-title","Produtos","p-subtitle","Exemplo de uso da API RxResource"],[1,"po-row"],["p-label","Itens por p\xE1gina","name","limit",1,"po-sm-12","po-md-4","po-lg-2","po-xl-2",3,"p-change","p-options"],["p-aria-label","Campos para pesquisa de Produtos",1,"po-sm-12","po-md-8","po-lg-4","po-xl-3","po-mt-md-4","po-mt-lg-4","po-mt-xl-4",3,"p-filter","p-items","p-disabled","p-filter-keys","p-show-listbox"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mb-5"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mb-2"],["p-text","Carregando produtos",3,"hidden"],[3,"product"]],template:function(i,o){if(i&1){let l=B();n(0,"po-page-default",0),_(1),E(2,"productsSearch"),_(3)(4)(5),n(6,"div",1)(7,"po-select",2),V("p-change",function(C){return F(l),D(o.onChangeLimit(C))}),p(),n(8,"po-search",3),V("p-filter",function(C){return F(l),D(o.onChangeFilter(C))}),p(),n(9,"po-container",4),x(10,Me,3,1)(11,Te,2,0,"p")(12,Fe,2,0,"p",5),m(13,"po-loading-overlay",6),p()()()}if(i&2){r();let l=W(M(2,8,o.productsResource.value()||K(12,be),o.filter())),u=o.productsResource.hasValue(),C=o.productsResource.isLoading(),ye=o.productsResource.error();r(6),a("p-options",o.optionsLimit),r(),a("p-items",l)("p-disabled",!u)("p-filter-keys",o.filterKeys)("p-show-listbox",!0),r(2),v(u?10:11),r(2),v(ye?12:-1),r(),a("hidden",!C)}},dependencies:[me,de,Z,Y,te,ee,pe,y,ne,re,ve,G,_e],encapsulation:2})}}return e})();export{rt as ProductsComponent};
